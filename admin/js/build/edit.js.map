{"version":3,"file":"edit.js","mappings":"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","sources":["webpack://@tablepress/tablepress/./admin/js/common/functions.js","webpack://@tablepress/tablepress/./admin/js/edit/contextmenu.js","webpack://@tablepress/tablepress/external window [\"wp\",\"hooks\"]","webpack://@tablepress/tablepress/external window [\"wp\",\"i18n\"]","webpack://@tablepress/tablepress/external window [\"wp\",\"url\"]","webpack://@tablepress/tablepress/webpack/bootstrap","webpack://@tablepress/tablepress/webpack/runtime/compat get default export","webpack://@tablepress/tablepress/webpack/runtime/define property getters","webpack://@tablepress/tablepress/webpack/runtime/hasOwnProperty shorthand","webpack://@tablepress/tablepress/webpack/runtime/make namespace object","webpack://@tablepress/tablepress/./admin/js/edit.js"],"sourcesContent":["/**\r\n * Common functions that are used in TablePress JS.\r\n *\r\n * @package TablePress\r\n * @subpackage Views JavaScript\r\n * @author Tobias Bäthge\r\n * @since 2.0.0\r\n */\r\n\r\n/**\r\n * Alias for document.getElementById and document.querySelectorAll, depending on the first character of the passed selector string. Resembles jQuery.\r\n *\r\n * @param {string} selector Selector string. If it starts with #, a single ID is selected, all matching selectors otherwise.\r\n * @return {Element|NodeList} A single DOM Element or a DOM NodeList matching the selector.\r\n */\r\nexport const $ = ( selector ) => ( '#' === selector[0] ? document.getElementById( selector.slice( 1 ) ) : document.querySelectorAll( selector ) );\r\n","/**\r\n * Definition of the contextmenu for Jspreadsheet on the \"Edit\" screen.\r\n *\r\n * @package TablePress\r\n * @subpackage Views JavaScript\r\n * @author Tobias Bäthge\r\n * @since 2.0.0\r\n */\r\n\r\n/* globals tp */\r\n/* eslint-disable jsdoc/check-param-names, jsdoc/valid-types, jsdoc/no-undefined-types */\r\n\r\n/**\r\n * WordPress dependencies.\r\n */\r\nimport { __, _x, _n, sprintf } from '@wordpress/i18n';\r\n\r\n/**\r\n * Returns the entries for the table editor's context menu.\r\n *\r\n * @param {[type]} obj [description]\r\n * @param {[type]} x   [description]\r\n * @param {[type]} y   [description]\r\n * @param {[type]} e   [description]\r\n * @return {Array} Context menu items.\r\n */\r\nconst contextMenu = ( obj /*, x, y, e */ ) => {\r\n\tconst num_rows = tp.editor.options.data.length;\r\n\tconst num_columns = tp.editor.options.columns.length;\r\n\tconst num_selected_rows = tp.helpers.selection.rows.length;\r\n\tconst num_selected_columns = tp.helpers.selection.columns.length;\r\n\tconst is_mac = window?.navigator?.platform?.includes( 'Mac' );\r\n\tconst meta_key = is_mac ?\r\n\t\t_x( '⌘', 'keyboard shortcut modifier key on a Mac keyboard', 'tablepress' ) :\r\n\t\t_x( 'Ctrl+', 'keyboard shortcut modifier key on a non-Mac keyboard', 'tablepress' );\r\n\tconst option_key = is_mac ?\r\n\t\t_x( '⌥', 'keyboard shortcut option key on a Mac keyboard', 'tablepress' ) :\r\n\t\t_x( 'Alt+', 'keyboard shortcut Alt key on a non-Mac keyboard', 'tablepress' );\r\n\r\n\t// Call-by-reference object for the cell_merge_allowed() call.\r\n\tconst error_message = {\r\n\t\ttext: ''\r\n\t};\r\n\r\n\ttp.helpers.visibility.update();\r\n\r\n\tconst items = [\r\n\t\t// Undo/Redo.\r\n\t\t{\r\n\t\t\ttitle: __( 'Undo', 'tablepress' ),\r\n\t\t\tshortcut: sprintf( _x( '%1$sZ', 'keyboard shortcut for Undo', 'tablepress' ), meta_key ),\r\n\t\t\tonclick: obj.undo,\r\n\t\t\tdisabled: ( -1 === obj.historyIndex ),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Redo', 'tablepress' ),\r\n\t\t\tshortcut: sprintf( _x( '%1$sY', 'keyboard shortcut for Redo', 'tablepress' ), meta_key ),\r\n\t\t\tonclick: obj.redo,\r\n\t\t\tdisabled: ( obj.historyIndex === obj.history.length - 1 ),\r\n\t\t},\r\n\r\n\t\t// Cut/Copy/Paste.\r\n\t\t{\r\n\t\t\ttype: 'divisor',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Cut', 'tablepress' ),\r\n\t\t\tshortcut: sprintf( _x( '%1$sX', 'keyboard shortcut for Cut', 'tablepress' ), meta_key ),\r\n\t\t\tonclick() {\r\n\t\t\t\t/* eslint-disable @wordpress/no-global-active-element */\r\n\t\t\t\tif ( 'TEXTAREA' === document.activeElement.tagName && document.activeElement.selectionStart !== document.activeElement.selectionEnd ) {\r\n\t\t\t\t\tdocument.execCommand( 'copy' ); // If text is selected in the actively edited cell, only copy that.\r\n\t\t\t\t\tconst cursorPosition = document.activeElement.selectionStart;\r\n\t\t\t\t\tdocument.activeElement.value = document.activeElement.value.slice( 0, document.activeElement.selectionStart ) + document.activeElement.value.slice( document.activeElement.selectionEnd ); // Cut the selected content.\r\n\t\t\t\t\tdocument.activeElement.selectionEnd = cursorPosition;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj.copy( true ); // Otherwise, copy highlighted cells.\r\n\t\t\t\t\tobj.setValue( obj.highlighted, '' ); // Make cell content empty.\r\n\t\t\t\t}\r\n\t\t\t\t/* eslint-enable @wordpress/no-global-active-element */\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Copy', 'tablepress' ),\r\n\t\t\tshortcut: sprintf( _x( '%1$sC', 'keyboard shortcut for Copy', 'tablepress' ), meta_key ),\r\n\t\t\tonclick() {\r\n\t\t\t\tif ( 'TEXTAREA' === document.activeElement.tagName && document.activeElement.selectionStart !== document.activeElement.selectionEnd ) { // eslint-disable-line @wordpress/no-global-active-element\r\n\t\t\t\t\tdocument.execCommand( 'copy' ); // If text is selected in the actively edited cell, only copy that.\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj.copy( true ); // Otherwise, copy highlighted cells.\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Paste', 'tablepress' ),\r\n\t\t\tshortcut: sprintf( _x( '%1$sV', 'keyboard shortcut for Paste', 'tablepress' ), meta_key ),\r\n\t\t\tonclick() {\r\n\t\t\t\t/* eslint-disable @wordpress/no-global-active-element */\r\n\t\t\t\tif ( 'TEXTAREA' === document.activeElement.tagName ) {\r\n\t\t\t\t\twindow.navigator.clipboard.readText().then( ( text ) => {\r\n\t\t\t\t\t\tif ( text ) {\r\n\t\t\t\t\t\t\tconst cursorPosition = document.activeElement.selectionStart + text.length;\r\n\t\t\t\t\t\t\tdocument.activeElement.value = document.activeElement.value.slice( 0, document.activeElement.selectionStart ) + text + document.activeElement.value.slice( document.activeElement.selectionEnd ); // Paste at the selection.\r\n\t\t\t\t\t\t\tdocument.activeElement.selectionEnd = cursorPosition;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} );\r\n\t\t\t\t} else if ( obj.selectedCell ) {\r\n\t\t\t\t\twindow.navigator.clipboard.readText().then( ( text ) => {\r\n\t\t\t\t\t\tif ( text ) {\r\n\t\t\t\t\t\t\tobj.paste( obj.selectedCell[0], obj.selectedCell[1], text );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t\t/* eslint-enable @wordpress/no-global-active-element */\r\n\t\t\t},\r\n\t\t\t// Firefox does not offer the readText() method, so \"Paste\" needs to be disabled.\r\n\t\t\tdisabled: ! window?.navigator?.clipboard?.readText,\r\n\t\t\ttooltip: ! window?.navigator?.clipboard?.readText ? __( 'Your browser does not allow pasting via the context menu. Use the keyboard shortcut instead.', 'tablepress' ) : '',\r\n\t\t},\r\n\r\n\t\t// Insert Link, Insert Image, Open Advanced Editor.\r\n\t\t{\r\n\t\t\ttype: 'divisor',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Insert Link', 'tablepress' ),\r\n\t\t\tshortcut: sprintf( _x( '%1$sL', 'keyboard shortcut for Insert Link', 'tablepress' ), meta_key ),\r\n\t\t\tonclick: tp.callbacks.insert_link.open_dialog.bind( null, ( 'TEXTAREA' === document.activeElement.tagName ) ? document.activeElement : null ), // eslint-disable-line @wordpress/no-global-active-element\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Insert Image', 'tablepress' ),\r\n\t\t\tshortcut: sprintf( _x( '%1$sI', 'keyboard shortcut for Insert Image', 'tablepress' ), meta_key ),\r\n\t\t\tonclick: tp.callbacks.insert_image.open_dialog.bind( null, ( 'TEXTAREA' === document.activeElement.tagName ) ? document.activeElement : null ), // eslint-disable-line @wordpress/no-global-active-element\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Advanced Editor', 'tablepress' ),\r\n\t\t\tshortcut: sprintf( _x( '%1$sE', 'keyboard shortcut for Advanced Editor', 'tablepress' ), meta_key ),\r\n\t\t\tonclick: tp.callbacks.advanced_editor.open_dialog.bind( null, ( 'TEXTAREA' === document.activeElement.tagName ) ? document.activeElement : null ), // eslint-disable-line @wordpress/no-global-active-element\r\n\t\t},\r\n\r\n\t\t// Duplicate/Insert/Append/Delete.\r\n\t\t{\r\n\t\t\ttype: 'divisor',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Duplicate …', 'tablepress' ),\r\n\t\t\tsubmenu: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Duplicate row', 'Duplicate rows', num_selected_rows, 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.insert_duplicate.bind( null, 'duplicate', 'rows' ),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Duplicate column', 'Duplicate columns', num_selected_columns, 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.insert_duplicate.bind( null, 'duplicate', 'columns' ),\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Insert …', 'tablepress' ),\r\n\t\t\tsubmenu: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Insert row above', 'Insert rows above', num_selected_rows, 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.insert_duplicate.bind( null, 'insert', 'rows', 'before' ),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Insert row below', 'Insert rows below', num_selected_rows, 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.insert_duplicate.bind( null, 'insert', 'rows', 'after' ),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Insert column on the left', 'Insert columns on the left', num_selected_columns, 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.insert_duplicate.bind( null, 'insert', 'columns', 'before' ),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Insert column on the right', 'Insert columns on the right', num_selected_columns, 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.insert_duplicate.bind( null, 'insert', 'columns', 'after' ),\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Append …', 'tablepress' ),\r\n\t\t\tsubmenu: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: __( 'Append row', 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.append.bind( null, 'rows', 1 ),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: __( 'Append column', 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.append.bind( null, 'columns', 1 ),\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Delete …', 'tablepress' ),\r\n\t\t\tsubmenu: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Delete row', 'Delete rows', num_selected_rows, 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.remove.bind( null, 'rows' ),\r\n\t\t\t\t\tdisabled: num_rows === num_selected_rows,\r\n\t\t\t\t\ttooltip: num_rows === num_selected_rows ? __( 'This option is disabled.', 'tablepress' ) + ' ' + __( 'You can not delete all table rows!', 'tablepress' ) : '',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Delete column', 'Delete columns', num_selected_columns, 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.remove.bind( null, 'columns' ),\r\n\t\t\t\t\tdisabled: num_columns === num_selected_columns,\r\n\t\t\t\t\ttooltip: num_columns === num_selected_columns ? __( 'This option is disabled.', 'tablepress' ) + ' ' + __( 'You can not delete all table columns!', 'tablepress' ) : '',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\r\n\t\t// Move rows/columns, Sort by column.\r\n\t\t{\r\n\t\t\ttype: 'divisor',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Move …', 'tablepress' ),\r\n\t\t\tsubmenu: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Move row up', 'Move rows up', num_selected_rows, 'tablepress' ),\r\n\t\t\t\t\tshortcut: sprintf( _x( '%1$s⇧↑', 'keyboard shortcut for Move up', 'tablepress' ), meta_key ),\r\n\t\t\t\t\tonclick: tp.callbacks.move.bind( null, 'up', 'rows' ),\r\n\t\t\t\t\tdisabled: ! tp.helpers.move_allowed( 'rows', 'up' ),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Move row down', 'Move rows down', num_selected_rows, 'tablepress' ),\r\n\t\t\t\t\tshortcut: sprintf( _x( '%1$s⇧↓', 'keyboard shortcut for Move down', 'tablepress' ), meta_key ),\r\n\t\t\t\t\tonclick: tp.callbacks.move.bind( null, 'down', 'rows' ),\r\n\t\t\t\t\tdisabled: ! tp.helpers.move_allowed( 'rows', 'down' ),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Move column left', 'Move columns left', num_selected_columns, 'tablepress' ),\r\n\t\t\t\t\tshortcut: sprintf( _x( '%1$s⇧←', 'keyboard shortcut for Move left', 'tablepress' ), meta_key ),\r\n\t\t\t\t\tonclick: tp.callbacks.move.bind( null, 'left', 'columns' ),\r\n\t\t\t\t\tdisabled: ! tp.helpers.move_allowed( 'columns', 'left' ),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Move column right', 'Move columns right', num_selected_columns, 'tablepress' ),\r\n\t\t\t\t\tshortcut: sprintf( _x( '%1$s⇧→', 'keyboard shortcut for Move right', 'tablepress' ), meta_key ),\r\n\t\t\t\t\tonclick: tp.callbacks.move.bind( null, 'right', 'columns' ),\r\n\t\t\t\t\tdisabled: ! tp.helpers.move_allowed( 'columns', 'right' ),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'divisor',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Move row to the top', 'Move rows to the top', num_selected_rows, 'tablepress' ),\r\n\t\t\t\t\tshortcut: sprintf( _x( '%1$s%2$s⇧↑', 'keyboard shortcut for Move to the top', 'tablepress' ), meta_key, option_key ),\r\n\t\t\t\t\tonclick: tp.callbacks.move.bind( null, 'top', 'rows' ),\r\n\t\t\t\t\tdisabled: ! tp.helpers.move_allowed( 'rows', 'top' ),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Move row to the bottom', 'Move rows to the bottom', num_selected_rows, 'tablepress' ),\r\n\t\t\t\t\tshortcut: sprintf( _x( '%1$s%2$s⇧↓', 'keyboard shortcut for Move to the bottom', 'tablepress' ), meta_key, option_key ),\r\n\t\t\t\t\tonclick: tp.callbacks.move.bind( null, 'bottom', 'rows' ),\r\n\t\t\t\t\tdisabled: ! tp.helpers.move_allowed( 'rows', 'bottom' ),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Move column to first', 'Move columns to first', num_selected_columns, 'tablepress' ),\r\n\t\t\t\t\tshortcut: sprintf( _x( '%1$s%2$s⇧←', 'keyboard shortcut for Move to first', 'tablepress' ), meta_key, option_key ),\r\n\t\t\t\t\tonclick: tp.callbacks.move.bind( null, 'first', 'columns' ),\r\n\t\t\t\t\tdisabled: ! tp.helpers.move_allowed( 'columns', 'first' ),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Move column to last', 'Move columns to last', num_selected_columns, 'tablepress' ),\r\n\t\t\t\t\tshortcut: sprintf( _x( '%1$s%2$s⇧→', 'keyboard shortcut for Move to last', 'tablepress' ), meta_key, option_key ),\r\n\t\t\t\t\tonclick: tp.callbacks.move.bind( null, 'last', 'columns' ),\r\n\t\t\t\t\tdisabled: ! tp.helpers.move_allowed( 'columns', 'last' ),\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Sort by column …', 'tablepress' ),\r\n\t\t\tsubmenu: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: __( 'Sort by column ascending', 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.sort.bind( null, 'asc' ),\r\n\t\t\t\t\tdisabled: 1 !== num_selected_columns,\r\n\t\t\t\t\ttooltip: 1 !== num_selected_columns ? __( 'This option is disabled because more than one column was selected.', 'tablepress' ) : '',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: __( 'Sort by column descending', 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.sort.bind( null, 'desc' ),\r\n\t\t\t\t\tdisabled: 1 !== num_selected_columns,\r\n\t\t\t\t\ttooltip: 1 !== num_selected_columns ? __( 'This option is disabled because more than one column was selected.', 'tablepress' ) : '',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\r\n\t\t// Hide/Show rows/columns.\r\n\t\t{\r\n\t\t\ttype: 'divisor',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Hide/Show …', 'tablepress' ),\r\n\t\t\tsubmenu: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Hide row', 'Hide rows', num_selected_rows, 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.hide_unhide.bind( null, 'hide', 'rows' ),\r\n\t\t\t\t\tdisabled: ! tp.helpers.visibility.selection_contains( 'rows', 1 ),\r\n\t\t\t\t\ttooltip: ! tp.helpers.visibility.selection_contains( 'rows', 1 ) ? __( 'This option is disabled because no visible rows were selected.', 'tablepress' ) : '',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Hide column', 'Hide columns', num_selected_columns, 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.hide_unhide.bind( null, 'hide', 'columns' ),\r\n\t\t\t\t\tdisabled: ! tp.helpers.visibility.selection_contains( 'columns', 1 ),\r\n\t\t\t\t\ttooltip: ! tp.helpers.visibility.selection_contains( 'columns', 1 ) ? __( 'This option is disabled because no visible columns were selected.', 'tablepress' ) : '',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Show row', 'Show rows', num_selected_rows, 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.hide_unhide.bind( null, 'unhide', 'rows' ),\r\n\t\t\t\t\tdisabled: ! tp.helpers.visibility.selection_contains( 'rows', 0 ),\r\n\t\t\t\t\ttooltip: ! tp.helpers.visibility.selection_contains( 'rows', 0 ) ? __( 'This option is disabled because no hidden rows were selected.', 'tablepress' ) : '',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: _n( 'Show column', 'Show columns', num_selected_columns, 'tablepress' ),\r\n\t\t\t\t\tonclick: tp.callbacks.hide_unhide.bind( null, 'unhide', 'columns' ),\r\n\t\t\t\t\tdisabled: ! tp.helpers.visibility.selection_contains( 'columns', 0 ),\r\n\t\t\t\t\ttooltip: ! tp.helpers.visibility.selection_contains( 'columns', 0 ) ? __( 'This option is disabled because no hidden columns were selected.', 'tablepress' ) : '',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\r\n\t\t// Merging/Unmerging cells.\r\n\t\t{\r\n\t\t\ttype: 'divisor',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: __( 'Combine/Merge cells', 'tablepress' ),\r\n\t\t\tonclick: tp.callbacks.merge_cells,\r\n\t\t\tdisabled: ( 1 === num_selected_rows && 1 === num_selected_columns ) || ! tp.helpers.cell_merge_allowed( 'no-alert' ),\r\n\t\t\ttooltip: ( 1 === num_selected_rows && 1 === num_selected_columns ) || ! tp.helpers.cell_merge_allowed( 'no-alert', error_message ) ? __( 'This option is disabled.', 'tablepress' ) + ' ' + error_message.text : '',\r\n\t\t}\r\n\t];\r\n\r\n\treturn items;\r\n};\r\n\r\nexport default contextMenu;\r\n","module.exports = window[\"wp\"][\"hooks\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"url\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * JavaScript code for the \"Edit\" screen.\r\n *\r\n * @package TablePress\r\n * @subpackage Views JavaScript\r\n * @author Tobias Bäthge\r\n * @since 2.0.0\r\n */\r\n\r\n/* globals tp, wp, ajaxurl, JSON, jspreadsheet, jexcel, wpLink, jQuery */\r\n/* eslint-disable jsdoc/check-param-names, jsdoc/valid-types */\r\n\r\n/**\r\n * WordPress dependencies.\r\n */\r\nimport {__, _x, sprintf} from '@wordpress/i18n';\r\nimport {doAction as do_action, applyFilters as apply_filters} from '@wordpress/hooks';\r\nimport {buildQueryString} from '@wordpress/url';\r\n\r\n/**\r\n * Internal dependencies.\r\n */\r\nimport {$} from './common/functions';\r\nimport contextMenu from './edit/contextmenu';\r\n\r\n// Ensure the global `tp` object exists.\r\nwindow.tp = window.tp || {};\r\n\r\ntp.made_changes = false;\r\n\r\ntp.helpers = tp.helpers || {};\r\ntp.callbacks = tp.callbacks || {};\r\n\r\n// Initial selection: cell A1.\r\ntp.helpers.selection = tp.helpers.selection || {\r\n\trows: [0],\r\n\tcolumns: [0],\r\n};\r\n\r\ntp.helpers.unsaved_changes = tp.helpers.unsaved_changes || {};\r\n\r\n/**\r\n * [unsaved_changes.unload_dialog description]\r\n *\r\n * @param {Event} event [description]\r\n */\r\ntp.helpers.unsaved_changes.unload_dialog = function (event) {\r\n\tevent.preventDefault(); // Cancel the event as stated by the standard.\r\n\tevent.returnValue = ''; // Chrome requires returnValue to be set.\r\n};\r\n\r\n/**\r\n * [unsaved_changes.set description]\r\n */\r\ntp.helpers.unsaved_changes.set = function () {\r\n\t// Bail early if this function was already called.\r\n\tif (tp.made_changes) {\r\n\t\treturn;\r\n\t}\r\n\ttp.made_changes = true;\r\n\twindow.addEventListener('beforeunload', tp.helpers.unsaved_changes.unload_dialog);\r\n};\r\n\r\n/**\r\n * [unsaved_changes.unset description]\r\n */\r\ntp.helpers.unsaved_changes.unset = function () {\r\n\ttp.made_changes = false;\r\n\twindow.removeEventListener('beforeunload', tp.helpers.unsaved_changes.unload_dialog);\r\n};\r\n\r\ntp.helpers.options = tp.helpers.options || {};\r\n\r\n/**\r\n * Loads table options and sets DOM element states appropriately.\r\n */\r\ntp.helpers.options.load = function () {\r\n\tObject.keys(tp.table.options).forEach(function (option_name) {\r\n\t\t// Skip entries that are not actually option fields.\r\n\t\tif ('last_editor' === option_name) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Allow skipping options, e.g. when custom loading is used.\r\n\t\toption_name = apply_filters('tablepress.optionsLoad', option_name);\r\n\t\tif ('' === option_name) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet $field = $(`#option-${option_name}`);\r\n\t\tif (!$field) {\r\n\t\t\t// If no field with just that option_name is found, it could be a radio button, which have IDs based on option_name and value.\r\n\t\t\t$field = $(`#option-${option_name}-${tp.table.options[option_name]}`);\r\n\t\t}\r\n\t\tif (!$field) {\r\n\t\t\t// If there's still no field, the field might be missing. For example, the \"Custom Commands\" only exists if a user is allowed to use `unfiltered_html`.\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ($field instanceof HTMLInputElement && 'checkbox' === $field.type) {\r\n\t\t\t// For checkboxes, the `checked` state is based on the value (true/false).\r\n\t\t\t$field.checked = tp.table.options[option_name];\r\n\t\t} else if ($field instanceof HTMLInputElement && 'radio' === $field.type) {\r\n\t\t\t// For checkboxes, the `checked` state is true, as only the field corresponding to the value is selected.\r\n\t\t\t$field.checked = true;\r\n\t\t} else {\r\n\t\t\t// For all other fields, the form field value is set according to the option value.\r\n\t\t\t$field.value = tp.table.options[option_name];\r\n\t\t}\r\n\t});\r\n\r\n\t// Turn off \"Enable Visitor Features\" if the table has merged cells.\r\n\tif (tp.table.options.use_datatables && tp.helpers.editor.has_merged_cells()) {\r\n\t\ttp.table.options.use_datatables = false;\r\n\t\t$('#option-use_datatables').checked = false;\r\n\t}\r\n\r\n\ttp.helpers.options.check_dependencies();\r\n};\r\n\r\n/**\r\n * Sets the table option property when the DOM element (form field) is changed.\r\n *\r\n * @param {Event} event [description]\r\n */\r\ntp.helpers.options.change = function (event) {\r\n\tif (!event.target) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst option_name = event.target.name || '';\r\n\r\n\t// Skip input fields that don't have a valid `name` attribute, as these don't directly reflect table options.\r\n\tif ('' === option_name) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst property = (event.target instanceof HTMLInputElement && 'checkbox' === event.target.type) ? 'checked' : 'value';\r\n\ttp.table.options[option_name] = event.target[property];\r\n\r\n\t// Save numeric options as numbers.\r\n\tif (event.target instanceof HTMLInputElement && 'number' === event.target.type) {\r\n\t\ttp.table.options[option_name] = parseInt(tp.table.options[option_name], 10);\r\n\t}\r\n\r\n\t// Turn off \"Enable Visitor Features\" if the table has merged cells.\r\n\tif ('use_datatables' === option_name && tp.table.options.use_datatables && tp.helpers.editor.has_merged_cells()) {\r\n\t\ttp.table.options.use_datatables = false;\r\n\t\t$('#option-use_datatables').checked = false;\r\n\t\twindow.alert(__('You can not enable the Table Features for Site Visitors, because your table contains combined/merged cells.', 'tablepress'));\r\n\t}\r\n\r\n\tdo_action('tablepress.optionsChange', option_name, property, event);\r\n\r\n\ttp.helpers.options.check_dependencies();\r\n\ttp.helpers.unsaved_changes.set();\r\n\ttp.editor.updateTable(); // Redraw table.\r\n};\r\n\r\n/**\r\n * Checks dependencies of options and sets DOM state (\"disabled\") appropriately.\r\n */\r\ntp.helpers.options.check_dependencies = function () {\r\n\t$('#option-use_datatables').disabled = !tp.table.options.table_head;\r\n\t$('#notice-datatables-head-row').style.display = tp.table.options.table_head ? 'none' : 'block';\r\n\r\n\t$('#option-print_name_position').disabled = !tp.table.options.print_name;\r\n\t$('#option-print_description_position').disabled = !tp.table.options.print_description;\r\n\r\n\tconst js_features_enabled = (tp.table.options.use_datatables && tp.table.options.table_head);\r\n\t$('#tablepress_edit-datatables-features').querySelectorAll(':scope input:not(#option-use_datatables), :scope textarea').forEach(($field) => ($field.disabled = !js_features_enabled));\r\n\r\n\tconst pagination_enabled = (js_features_enabled && tp.table.options.datatables_paginate);\r\n\t$('#option-datatables_lengthchange').disabled = !pagination_enabled;\r\n\t$('#option-datatables_paginate_entries').disabled = !pagination_enabled;\r\n\r\n\tdo_action('tablepress.optionsCheckDependencies');\r\n};\r\n\r\n/**\r\n * Validate certain form fields, before saving or generating a preview.\r\n */\r\ntp.helpers.options.validate_fields = function () {\r\n\t// The pagination entries value must be a positive number.\r\n\tif (tp.table.options.datatables_paginate && (isNaN(tp.table.options.datatables_paginate_entries) || tp.table.options.datatables_paginate_entries < 1 || tp.table.options.datatables_paginate_entries > 9999)) {\r\n\t\twindow.alert(sprintf(__('The entered value in the “%1$s” field is invalid.', 'tablepress'), __('Pagination Entries', 'tablepress')));\r\n\t\tconst $field = $('#option-datatables_paginate_entries');\r\n\t\t$field.focus();\r\n\t\t$field.select();\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// The \"Extra CSS classes\" must not contain invalid characters.\r\n\tif ((/[^A-Za-z0-9- _:]/).test(tp.table.options.extra_css_classes)) {\r\n\t\twindow.alert(sprintf(__('The entered value in the “%1$s” field is invalid.', 'tablepress'), __('Extra CSS Classes', 'tablepress')));\r\n\t\tconst $field = $('#option-extra_css_classes');\r\n\t\t$field.focus();\r\n\t\t$field.select();\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn apply_filters('tablepress.optionsValidateFields', true);\r\n};\r\n\r\ntp.helpers.visibility = tp.helpers.visibility || {};\r\n\r\n/**\r\n * [visibility.load description]\r\n */\r\ntp.helpers.visibility.load = function () {\r\n\tconst num_rows = tp.table.visibility.rows.length;\r\n\tconst num_columns = tp.table.visibility.columns.length;\r\n\tconst meta = {};\r\n\t// Collect meta data for hidden rows.\r\n\tfor (let row_idx = 0; row_idx < num_rows; row_idx++) {\r\n\t\tif (1 === tp.table.visibility.rows[row_idx]) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tfor (let col_idx = 0; col_idx < num_columns; col_idx++) {\r\n\t\t\tconst cell_name = jspreadsheet.getColumnNameFromId([col_idx, row_idx]);\r\n\t\t\tmeta[cell_name] = meta[cell_name] || {};\r\n\t\t\tmeta[cell_name].row_hidden = true;\r\n\t\t}\r\n\t}\r\n\t// Collect meta data for hidden columns.\r\n\tfor (let col_idx = 0; col_idx < num_columns; col_idx++) {\r\n\t\tif (1 === tp.table.visibility.columns[col_idx]) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tfor (let row_idx = 0; row_idx < num_rows; row_idx++) {\r\n\t\t\tconst cell_name = jspreadsheet.getColumnNameFromId([col_idx, row_idx]);\r\n\t\t\tmeta[cell_name] = meta[cell_name] || {};\r\n\t\t\tmeta[cell_name].column_hidden = true;\r\n\t\t}\r\n\t}\r\n\treturn meta;\r\n};\r\n\r\n/**\r\n * [visibility.update description]\r\n */\r\ntp.helpers.visibility.update = function () {\r\n\t// Set all rows and columns to visible first.\r\n\ttp.table.visibility.rows = [];\r\n\tfor (let row_idx = 0; row_idx < tp.editor.options.data.length; row_idx++) {\r\n\t\ttp.table.visibility.rows[row_idx] = 1;\r\n\t}\r\n\ttp.table.visibility.columns = [];\r\n\tfor (let col_idx = 0; col_idx < tp.editor.options.columns.length; col_idx++) {\r\n\t\ttp.table.visibility.columns[col_idx] = 1;\r\n\t}\r\n\t// Get all hidden cells and mark their rows/columns as hidden.\r\n\tObject.keys(tp.editor.options.meta).forEach(function (cell_name) {\r\n\t\tconst cell = jspreadsheet.getIdFromColumnName(cell_name, true); // Returns [ col_idx, row_idx ].\r\n\t\tif (1 === tp.table.visibility.rows[cell[1]] && tp.editor.options.meta[cell_name].row_hidden) {\r\n\t\t\ttp.table.visibility.rows[cell[1]] = 0;\r\n\t\t}\r\n\t\tif (1 === tp.table.visibility.columns[cell[0]] && tp.editor.options.meta[cell_name].column_hidden) {\r\n\t\t\ttp.table.visibility.columns[cell[0]] = 0;\r\n\t\t}\r\n\t});\r\n};\r\n\r\n/**\r\n * Check whether the Hide or Unhide entries in the context menu should be disabled, by comparing\r\n * whether any of the selected rows/columns have a different visibility state than what the entry would set.\r\n *\r\n * @param {string}  type       What to hide or unhide (\"rows\" or \"columns\").\r\n * @param {boolean} visibility 0 for hidden, 1 for visible.\r\n * @return {boolean} True if the entry shall be shown, false if not.\r\n */\r\ntp.helpers.visibility.selection_contains = function (type, visibility) {\r\n\t// Show the entry as soon as one of the selected rows/columns does not have the intended visibility state.\r\n\treturn tp.helpers.selection[type].some((roc_idx) => (tp.table.visibility[type][roc_idx] === visibility));\r\n};\r\n\r\n/**\r\n * For the context menu and button, determine whether moving the rows/columns of the current selection is allowed.\r\n *\r\n * @param {[type]} type      [description]\r\n * @param {[type]} direction [description]\r\n * @return {boolean} Whether the move is allowed or not.\r\n */\r\ntp.helpers.move_allowed = function (type, direction) {\r\n\t// When moving up or left, or to top or first, test the first row/column of the selected range.\r\n\tlet roc_to_test = tp.helpers.selection[type][0];\r\n\tlet min_max_roc = 0; // First row/column.\r\n\t// When moving down or right, or bottom or last, test the last row/column of the selected range.\r\n\tif ('down' === direction || 'right' === direction || 'bottom' === direction || 'last' === direction) {\r\n\t\troc_to_test = tp.helpers.selection[type][tp.helpers.selection[type].length - 1];\r\n\t\tmin_max_roc = ('rows' === type) ? tp.editor.options.data.length - 1 : tp.editor.options.columns.length - 1;\r\n\t}\r\n\t// Moving is disallowed if the first/last row/column is already at the target edge.\r\n\tif (min_max_roc === roc_to_test) {\r\n\t\treturn false;\r\n\t}\r\n\t// Otherwise allow the move.\r\n\treturn true;\r\n};\r\n\r\n/**\r\n * For the context menu and button, determine whether merging the current selection is allowed.\r\n *\r\n * @param {string} errors        Whether errors should also be alert()ed.\r\n * @param {Object} error_message Call-by-reference object for the error message.\r\n * @return {boolean} Whether the merge is allowed or not.\r\n */\r\ntp.helpers.cell_merge_allowed = function (errors, error_message = {}) {\r\n\tconst alert_on_error = ('alert' === errors);\r\n\r\n\t// If the \"Table Head Row\" and Enable Visitor Features\" options are enabled, disable merging cells.\r\n\tif (tp.table.options.table_head && tp.table.options.use_datatables) {\r\n\t\terror_message.text = sprintf(__('You can not combine these cells, because the “%1$s” checkbox in the “%2$s” section is checked.', 'tablepress'), __('Enable Visitor Features', 'tablepress'), __('Table Features for Site Visitors', 'tablepress')) +\r\n\t\t\t' ' + __('The Table Features for Site Visitors are not compatible with merged cells.', 'tablepress');\r\n\t\tif (alert_on_error) {\r\n\t\t\twindow.alert(error_message.text);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst first_selected_row = tp.helpers.selection.rows[0];\r\n\tconst last_selected_row = tp.helpers.selection.rows[tp.helpers.selection.rows.length - 1];\r\n\r\n\t// If the head row option is enabled, and the first and (at least) second row are selected, disable merging cells.\r\n\tif (tp.table.options.table_head && 0 === first_selected_row && last_selected_row > 0) {\r\n\t\terror_message.text = sprintf(__('You can not combine these cells, because the “%1$s” checkbox in the “%2$s” section is checked.', 'tablepress'), __('Table Head Row', 'tablepress'), __('Table Options', 'tablepress'));\r\n\t\tif (alert_on_error) {\r\n\t\t\twindow.alert(error_message.text);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// If the foot row option is enabled, and the last and (at least) next to last row are selected, disable merging cells.\r\n\tconst last_row_idx = tp.editor.options.data.length - 1;\r\n\tif (tp.table.options.table_foot && last_row_idx === last_selected_row && first_selected_row < last_row_idx) {\r\n\t\terror_message.text = sprintf(__('You can not combine these cells, because the “%1$s” checkbox in the “%2$s” section is checked.', 'tablepress'), __('Table Foot Row', 'tablepress'), __('Table Options', 'tablepress'));\r\n\t\tif (alert_on_error) {\r\n\t\t\twindow.alert(error_message.text);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Otherwise allow the merge.\r\n\treturn true;\r\n};\r\n\r\ntp.helpers.editor = tp.helpers.editor || {};\r\n\r\n/**\r\n * [editor_reselect description]\r\n *\r\n * @param {[type]} el  [description]\r\n * @param {[type]} obj Jspreadsheet instance, passed e.g. by onblur. If not present, we use tp.editor.\r\n */\r\ntp.helpers.editor.reselect = function (el, obj) {\r\n\tif ('undefined' === typeof obj) {\r\n\t\tobj = tp.editor;\r\n\t}\r\n\tobj.updateSelectionFromCoords(\r\n\t\ttp.helpers.selection.columns[0],\r\n\t\ttp.helpers.selection.rows[0],\r\n\t\ttp.helpers.selection.columns[tp.helpers.selection.columns.length - 1],\r\n\t\ttp.helpers.selection.rows[tp.helpers.selection.rows.length - 1]\r\n\t);\r\n};\r\n\r\n/**\r\n * [editor_has_merged_cells description]\r\n */\r\ntp.helpers.editor.has_merged_cells = function () {\r\n\tconst num_rows = tp.editor.options.data.length;\r\n\tconst num_columns = tp.editor.options.columns.length;\r\n\tfor (let row_idx = 1; row_idx < num_rows; row_idx++) {\r\n\t\tfor (let col_idx = 1; col_idx < num_columns; col_idx++) {\r\n\t\t\tif ('#rowspan#' === tp.editor.options.data[row_idx][col_idx] || '#colspan#' === tp.editor.options.data[row_idx][col_idx]) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n};\r\n\r\n/**\r\n * Creates the sorting function that is used when sorting the table by a column.\r\n *\r\n * @param {number} direction Sorting direction. 0 for ascending, 1 for descending.\r\n * @return {Function} Sorting function.\r\n */\r\ntp.helpers.editor.sorting = function (direction) {\r\n\tdirection = direction ? -1 : 1;\r\n\treturn function (a, b) {\r\n\t\t// The actual value is stored in the second array element, the first contains the row index.\r\n\t\tconst sortResult = a[1].localeCompare(b[1], undefined, {\r\n\t\t\tnumeric: true,\r\n\t\t\tsensitivity: 'base'\r\n\t\t});\r\n\t\treturn direction * sortResult;\r\n\t};\r\n};\r\n\r\ntp.callbacks.editor = tp.callbacks.editor || {};\r\n\r\n/**\r\n * [editor_onselection description]\r\n *\r\n * @param {[type]} instance [description]\r\n * @param {[type]} x1       [description]\r\n * @param {[type]} y1       [description]\r\n * @param {[type]} x2       [description]\r\n * @param {[type]} y2       [description]\r\n * @param {[type]} origin   [description]\r\n */\r\ntp.callbacks.editor.onselection = function (instance, x1, y1, x2, y2 /*, origin */) {\r\n\ttp.helpers.selection = {\r\n\t\trows: [],\r\n\t\tcolumns: [],\r\n\t};\r\n\tfor (let row_idx = y1; row_idx <= y2; row_idx++) {\r\n\t\ttp.helpers.selection.rows.push(row_idx);\r\n\t}\r\n\tfor (let col_idx = x1; col_idx <= x2; col_idx++) {\r\n\t\ttp.helpers.selection.columns.push(col_idx);\r\n\t}\r\n};\r\n\r\n/**\r\n * [editor_onupdatetable description]\r\n *\r\n * @param {[type]} instance  [description]\r\n * @param {[type]} cell      [description]\r\n * @param {[type]} col_idx   [description]\r\n * @param {[type]} row_idx   [description]\r\n * @param {[type]} value     [description]\r\n * @param {[type]} label     [description]\r\n * @param {[type]} cell_name [description]\r\n */\r\ntp.callbacks.editor.onupdatetable = function (instance, cell, col_idx, row_idx, value, label, cell_name) {\r\n\tconst meta = instance.jspreadsheet.options.meta[cell_name];\r\n\r\n\t// Add class to cells (td) of hidden columns.\r\n\tcell.classList.toggle('column-hidden', Boolean(meta?.column_hidden));\r\n\r\n\t// Add classes to row (tr) for hidden rows and head/foot row. Only needs to be done once per row, thus when processing the first column.\r\n\tif (0 === col_idx) {\r\n\t\tcell.parentNode.classList.toggle('row-hidden', Boolean(meta?.row_hidden));\r\n\t\tcell.parentNode.classList.remove('head-row', 'foot-row');\r\n\r\n\t\t// After processing the last row, potentially add classes to the head and foot rows.\r\n\t\tif (row_idx === instance.jspreadsheet.rows.length - 1) {\r\n\t\t\tconst visible_rows = instance.jspreadsheet.content.querySelectorAll(':scope tbody tr:not(.row-hidden)');\r\n\t\t\t// Designating a head and a foot row only makes sense for tables with more than one row. Single-row tables will only have a table body.\r\n\t\t\tif (1 < visible_rows.length) {\r\n\t\t\t\tif (tp.table.options.table_head) {\r\n\t\t\t\t\tvisible_rows[0].classList.add('head-row');\r\n\t\t\t\t}\r\n\t\t\t\tif (tp.table.options.table_foot) {\r\n\t\t\t\t\tvisible_rows[visible_rows.length - 1].classList.add('foot-row');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * [editor_oninsertroc description]\r\n *\r\n * Abbreviations:\r\n * roc: row or column\r\n * cor: column or row\r\n *\r\n * @param {[type]} type         [description]\r\n * @param {[type]} action       [description]\r\n * @param {[type]} el           [description]\r\n * @param {[type]} roc_idx      [description]\r\n * @param {[type]} num_rocs     [description]\r\n * @param {[type]} roc_records  [description]\r\n * @param {[type]} insertBefore [description]\r\n */\r\ntp.callbacks.editor.oninsertroc = function (type, action, el, roc_idx, num_rocs, roc_records, insertBefore) {\r\n\tconst handling_rows = ('rows' === type);\r\n\tconst property = handling_rows ? 'column_hidden' : 'row_hidden';\r\n\tconst duplicating = ('duplicate' === action);\r\n\r\n\tconst from_roc_idx = roc_idx + (insertBefore ? num_rocs : 0);\r\n\tconst num_cors = handling_rows ? tp.editor.options.columns.length : tp.editor.options.data.length;\r\n\r\n\t// Get data of row/column that is copied.\r\n\tconst from_meta = {};\r\n\tfor (let cor_idx = 0; cor_idx < num_cors; cor_idx++) {\r\n\t\tconst cell_idx = handling_rows ? [cor_idx, from_roc_idx] : [from_roc_idx, cor_idx];\r\n\t\tconst meta = tp.editor.options.meta[jspreadsheet.getColumnNameFromId(cell_idx)];\r\n\t\tif (!meta) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\t// When duplicating, copy full cell meta, otherwise only the necessary property (row visibility for columns, column visibility for rows).\r\n\t\tif (duplicating) {\r\n\t\t\tfrom_meta[cor_idx] = meta;\r\n\t\t} else if (meta[property]) {\r\n\t\t\tfrom_meta[cor_idx] = from_meta[cor_idx] || {};\r\n\t\t\tfrom_meta[cor_idx][property] = true;\r\n\t\t}\r\n\t}\r\n\r\n\tconst from_meta_keys = Object.keys(from_meta);\r\n\t// Bail early if there's nothing to copy.\r\n\tif (!from_meta_keys.length) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Construct meta data for target rows/columns.\r\n\tconst to_meta = {};\r\n\tif (!insertBefore) {\r\n\t\troc_idx++; // When appending (i.e. insert after), we start after the current row or column.\r\n\t}\r\n\tfor (let new_roc = 0; new_roc < num_rocs; new_roc++) {\r\n\t\tconst to_roc_idx = roc_idx + new_roc;\r\n\t\tfrom_meta_keys.forEach(function (cor_idx) {\r\n\t\t\tconst cell_idx = handling_rows ? [cor_idx, to_roc_idx] : [to_roc_idx, cor_idx];\r\n\t\t\tto_meta[jspreadsheet.getColumnNameFromId(cell_idx)] = from_meta[cor_idx];\r\n\t\t});\r\n\t}\r\n\r\n\ttp.editor.setMeta(to_meta);\r\n\ttp.editor.updateTable(); // Redraw table.\r\n};\r\n\r\n/**\r\n * [editor_onmove description]\r\n *\r\n * @param {[type]} el          [description]\r\n * @param {[type]} old_roc_idx [description]\r\n * @param {[type]} new_roc_idx [description]\r\n */\r\ntp.callbacks.editor.onmove = function (/* el, old_roc_idx, new_roc_idx */) {\r\n\ttp.helpers.editor.reselect();\r\n\ttp.helpers.unsaved_changes.set();\r\n};\r\n\r\n/**\r\n * [editor_onsort description]\r\n *\r\n * @param {[type]} el     [description]\r\n * @param {[type]} column [description]\r\n * @param {[type]} order  [description]\r\n */\r\ntp.callbacks.editor.onsort = function (/* el, column, order */) {\r\n\ttp.editor.updateTable(); // Redraw table.\r\n\ttp.helpers.unsaved_changes.set();\r\n};\r\n\r\n/**\r\n * Copy the generated link or image HTML code from the helper textarea to the first selected table cell.\r\n */\r\ntp.helpers.editor.insert_from_helper_textarea = function () {\r\n\ttp.editor.setValueFromCoords(tp.helpers.selection.columns[0], tp.helpers.selection.rows[0], this.value);\r\n};\r\n\r\ntp.callbacks.insert_link = {};\r\n\r\n/**\r\n * Open the wpLink dialog for inserting links.\r\n *\r\n * @param {HTMLElement|null} $active_textarea Active textarea of the table editor or null.\r\n */\r\ntp.callbacks.insert_link.open_dialog = function ($active_textarea = null) {\r\n\tconst $helper_textarea = $('#textarea-insert-helper');\r\n\t$helper_textarea.value = tp.editor.options.data[tp.helpers.selection.rows[0]][tp.helpers.selection.columns[0]];\r\n\tif ($active_textarea) {\r\n\t\t$helper_textarea.selectionStart = $active_textarea.selectionStart;\r\n\t\t$helper_textarea.selectionEnd = $active_textarea.selectionEnd;\r\n\t} else {\r\n\t\t$helper_textarea.selectionStart = $helper_textarea.value.length;\r\n\t\t$helper_textarea.selectionEnd = $helper_textarea.value.length;\r\n\t}\r\n\tconst cell_name = jexcel.getColumnNameFromId([tp.helpers.selection.columns[0], tp.helpers.selection.rows[0]]);\r\n\t$('#link-modal-title').textContent = sprintf(__('Insert Link into cell %1$s', 'tablepress'), cell_name);\r\n\twpLink.open('textarea-insert-helper');\r\n\tjexcel.current = null; // This is necessary to prevent problems with the focus when the \"Insert Link\" dialog is called from the context menu.\r\n};\r\n\r\ntp.callbacks.insert_image = {};\r\n\r\n/**\r\n * Open the WP Media library for inserting images.\r\n *\r\n * @param {HTMLElement|null} $active_textarea Active textarea of the table editor or null.\r\n */\r\ntp.callbacks.insert_image.open_dialog = function ($active_textarea = null) {\r\n\tconst $helper_textarea = $('#textarea-insert-helper');\r\n\t$helper_textarea.value = tp.editor.options.data[tp.helpers.selection.rows[0]][tp.helpers.selection.columns[0]];\r\n\tif ($active_textarea) {\r\n\t\t$helper_textarea.selectionStart = $active_textarea.selectionStart;\r\n\t\t$helper_textarea.selectionEnd = $active_textarea.selectionEnd;\r\n\t} else {\r\n\t\t$helper_textarea.selectionStart = $helper_textarea.value.length;\r\n\t\t$helper_textarea.selectionEnd = $helper_textarea.value.length;\r\n\t}\r\n\twp.media.editor.open('textarea-insert-helper', {\r\n\t\tframe: 'post',\r\n\t\tstate: 'insert',\r\n\t\ttitle: wp.media.view.l10n.addMedia,\r\n\t\tmultiple: true,\r\n\t});\r\n\tconst cell_name = jexcel.getColumnNameFromId([tp.helpers.selection.columns[0], tp.helpers.selection.rows[0]]);\r\n\tdocument.querySelector('#media-frame-title h1').textContent = sprintf(__('Add media to cell %1$s', 'tablepress'), cell_name);\r\n\tjexcel.current = null; // This is necessary to prevent problems with the focus when the \"Insert Link\" dialog is called from the context menu.\r\n};\r\n\r\ntp.callbacks.advanced_editor = {};\r\n\r\ntp.callbacks.advanced_editor.$textarea = $('#advancededitorcontent');\r\n\r\n/**\r\n * Open the wpdialog for the Advanced Editor.\r\n *\r\n * @param {HTMLElement|null} $active_textarea Active textarea of the table editor or null.\r\n */\r\ntp.callbacks.advanced_editor.open_dialog = function ($active_textarea = null) {\r\n\ttp.callbacks.advanced_editor.$textarea.value = tp.editor.options.data[tp.helpers.selection.rows[0]][tp.helpers.selection.columns[0]];\r\n\r\n\tconsole.log(tp.callbacks.advanced_editor.$textarea.value)\r\n\tconsole.log($active_textarea);\r\n\r\n\tconst cell_name = jexcel.getColumnNameFromId([tp.helpers.selection.columns[0], tp.helpers.selection.rows[0]]);\r\n\tconst title = sprintf(__('Advanced Editor for cell %1$s', 'tablepress'), cell_name);\r\n\t$('#advanced-editor-label').textContent = title; // Screen reader label for the \"Advanced Editor\" textarea.\r\n\t$('#link-modal-title').textContent = sprintf(__('Insert Link into cell %1$s', 'tablepress'), cell_name);\r\n\r\n\tjQuery('#advanced-editor').wpdialog({\r\n\t\twidth: 600,\r\n\t\tmodal: true,\r\n\t\ttitle,\r\n\t\tresizable: false, // Height of textarea does not increase when resizing editor height.\r\n\t\tcloseOnEscape: true,\r\n\t\tbuttons: [\r\n\t\t\t{\r\n\t\t\t\ttext: __('Cancel', 'tablepress'),\r\n\t\t\t\tclass: 'button button-cancel',\r\n\t\t\t\tclick() {\r\n\t\t\t\t\tjQuery(this).wpdialog('close');\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: __('OK', 'tablepress'),\r\n\t\t\t\tclass: 'button button-primary button-ok',\r\n\t\t\t\tclick: tp.callbacks.advanced_editor.confirm_save,\r\n\t\t\t},\r\n\t\t],\r\n\t});\r\n\r\n\tjexcel.current = null; // This is necessary to prevent problems with the focus and cells being emptied when the Advanced Editor is called from the context menu.\r\n\tif ($active_textarea) {\r\n\t\ttp.callbacks.advanced_editor.$textarea.selectionStart = $active_textarea.selectionStart;\r\n\t\ttp.callbacks.advanced_editor.$textarea.selectionEnd = $active_textarea.selectionEnd;\r\n\t} else {\r\n\t\ttp.callbacks.advanced_editor.$textarea.selectionStart = tp.callbacks.advanced_editor.$textarea.value.length;\r\n\t\ttp.callbacks.advanced_editor.$textarea.selectionEnd = tp.callbacks.advanced_editor.$textarea.value.length;\r\n\t}\r\n\t// tp.callbacks.advanced_editor.$textarea.focus();\r\n};\r\n\r\n/**\r\n * Confirm and save changes of the Advanced Editor.\r\n */\r\ntp.callbacks.advanced_editor.confirm_save = function () {\r\n\tconst current_value = tp.editor.options.data[tp.helpers.selection.rows[0]][tp.helpers.selection.columns[0]];\r\n\t// Only set the cell content if changes were made to not wrongly call tp.helpers.unsaved_changes.set().\r\n\tconsole.log(tp.helpers.selection.columns[0], tp.helpers.selection.rows[0])\r\n\tconsole.log(tp.callbacks.advanced_editor.$textarea.value)\r\n\t// if (tp.callbacks.advanced_editor.$textarea.value !== current_value) {\r\n\t\ttp.editor.setValueFromCoords(\r\n\t\t\ttp.helpers.selection.columns[0],\r\n\t\t\ttp.helpers.selection.rows[0],\r\n\t\t\t// tp.callbacks.advanced_editor.$textarea.value\r\n\t\t\twindow.tinyMCE.get('advancededitorcontent').getContent()\r\n\t\t);\r\n\t// }\r\n\tjQuery(this).wpdialog('close');\r\n};\r\n\r\ntp.callbacks.help_box = {};\r\n\r\n/**\r\n * Open the wpdialog for a help box.\r\n *\r\n * @param {Event} event [description]\r\n */\r\ntp.callbacks.help_box.open_dialog = function (event) {\r\n\tconst $helpbox = $(event.target.dataset.helpBox);\r\n\tjQuery($helpbox).wpdialog({\r\n\t\theight: $helpbox.dataset.height,\r\n\t\twidth: $helpbox.dataset.width,\r\n\t\tminWidth: 260,\r\n\t\tmodal: true,\r\n\t\tcloseOnEscape: true,\r\n\t\tbuttons: [\r\n\t\t\t{\r\n\t\t\t\ttext: __('OK', 'tablepress'),\r\n\t\t\t\tclass: 'button button-ok',\r\n\t\t\t\tclick() {\r\n\t\t\t\t\tjQuery(this).wpdialog('close');\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t],\r\n\t\topen( /* event, ui */) {\r\n\t\t\tjQuery(this).next().find('.button-ok').trigger('focus');\r\n\t\t},\r\n\t});\r\n};\r\n\r\ntp.callbacks.table_preview = {};\r\n\r\n/**\r\n * Handle showing the table preview.\r\n *\r\n * @param {Event} event [description]\r\n */\r\ntp.callbacks.table_preview.process = function (event) {\r\n\t// Never follow the link of the Preview button, everything is handled with JS.\r\n\tevent.preventDefault();\r\n\r\n\tlet table_name = $('#table-name').value;\r\n\tif ('' === table_name.trim()) {\r\n\t\ttable_name = __('(no name)', 'tablepress');\r\n\t}\r\n\r\n\t// Initialize the Table Preview wpdialog.\r\n\ttp.callbacks.table_preview.$dialog = jQuery('#table-preview').wpdialog({\r\n\t\tautoOpen: false,\r\n\t\twidth: window.innerWidth - 80,\r\n\t\theight: window.innerHeight - 80,\r\n\t\tmodal: true,\r\n\t\ttitle: sprintf(__('Preview of table “%1$s” (ID %2$s)', 'tablepress'), table_name, tp.table.id),\r\n\t\tcloseOnEscape: true,\r\n\t\tbuttons: [\r\n\t\t\t{\r\n\t\t\t\ttext: __('OK', 'tablepress'),\r\n\t\t\t\tclass: 'button button-ok',\r\n\t\t\t\tclick() {\r\n\t\t\t\t\tjQuery(this).wpdialog('close');\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t],\r\n\t});\r\n\r\n\t// For tables without unsaved changes, show an externally rendered table from a URL in an iframe in a wpdialog.\r\n\tif (!tp.made_changes) {\r\n\t\tconst $iframe = $('#table-preview-iframe');\r\n\t\t$iframe.src = event.target.href;\r\n\t\t$iframe.removeAttribute('srcdoc');\r\n\t\ttp.callbacks.table_preview.$dialog.wpdialog('open');\r\n\t\treturn;\r\n\t}\r\n\r\n\t// For tables with unsaved changes, get the table preview HTML code for the iframe via AJAX.\r\n\r\n\t// Collect information about hidden rows and columns.\r\n\ttp.helpers.visibility.update();\r\n\r\n\t// Prepare the data for the AJAX request.\r\n\tconst request_data = {\r\n\t\taction: 'tablepress_preview_table',\r\n\t\t_ajax_nonce: tp.nonces.preview_table,\r\n\t\ttablepress: {\r\n\t\t\tid: tp.table.id,\r\n\t\t\tnew_id: tp.table.new_id,\r\n\t\t\tname: $('#table-name').value,\r\n\t\t\tdescription: $('#table-description').value,\r\n\t\t\tdata: JSON.stringify(tp.editor.options.data),\r\n\t\t\toptions: JSON.stringify(tp.table.options),\r\n\t\t\tvisibility: JSON.stringify(tp.table.visibility),\r\n\t\t\tnumber: {\r\n\t\t\t\trows: tp.editor.options.data.length,\r\n\t\t\t\tcolumns: tp.editor.options.columns.length,\r\n\t\t\t},\r\n\t\t\tcssStyles: JSON.stringify(tp.editor.getStyle())\r\n\t\t},\r\n\t};\r\n\r\n\t// Add spinner, disable \"Preview\" buttons, and change cursor.\r\n\tevent.target.parentNode.insertAdjacentHTML('beforeend', `<span id=\"spinner-table-preview\" class=\"spinner-table-preview spinner is-active\" title=\"${__('The Table Preview is being loaded …', 'tablepress')}\"/>`);\r\n\t$('.button-preview').forEach((button) => button.classList.add('disabled'));\r\n\tdocument.body.classList.add('wait');\r\n\r\n\t// Load the table preview data from the server via an AJAX request.\r\n\tfetch(ajaxurl, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t\tbody: buildQueryString(request_data),\r\n\t})\r\n\t\t// Check for HTTP connection problems.\r\n\t\t.then((response) => {\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthrow new Error(`There was a problem with the server, HTTP response code ${response.status} (${response.statusText}).`);\r\n\t\t\t}\r\n\t\t\treturn response.json();\r\n\t\t})\r\n\t\t// Check for problems with the transmitted data.\r\n\t\t.then((data) => {\r\n\t\t\tif ('undefined' === typeof data || null === data || '-1' === data || 'undefined' === typeof data.success) {\r\n\t\t\t\tthrow new Error('The JSON data returned from the server is unclear or incomplete.');\r\n\t\t\t}\r\n\r\n\t\t\tif (true !== data.success) {\r\n\t\t\t\tthrow new Error('The preview could not be loaded.');\r\n\t\t\t}\r\n\r\n\t\t\ttp.callbacks.table_preview.success(data);\r\n\t\t})\r\n\t\t// Handle errors.\r\n\t\t.catch((error) => tp.callbacks.table_preview.error(error.message))\r\n\t\t.finally(() => {\r\n\t\t\t$('#spinner-table-preview').remove();\r\n\t\t\t$('.button-preview').forEach((button) => button.classList.remove('disabled'));\r\n\t\t\tdocument.body.classList.remove('wait');\r\n\t\t});\r\n};\r\n\r\n/**\r\n * [success description]\r\n *\r\n * @param {[type]} data [description]\r\n */\r\ntp.callbacks.table_preview.success = function (data) {\r\n\tconst $iframe = $('#table-preview-iframe');\r\n\t$iframe.src = '';\r\n\t$iframe.srcdoc = `<!DOCTYPE html><html><head>${data.head_html}</head><body>${data.body_html}</body></html>`;\r\n\r\n\ttp.callbacks.table_preview.$dialog.wpdialog('open');\r\n};\r\n\r\n/**\r\n * [error description]\r\n *\r\n * @param {[type]} message [description]\r\n */\r\ntp.callbacks.table_preview.error = function (message) {\r\n\tmessage = __('Attention: Unfortunately, an error occurred.', 'tablepress') + ' ' + message;\r\n\tconst div_id = `show-preview-${Date.now()}`;\r\n\r\n\t$('#spinner-table-preview').parentNode.insertAdjacentHTML('afterend', `<div id=\"${div_id}\" class=\"ajax-alert notice notice-error\"><p>${message}</p></div>`);\r\n\r\n\tconst $notice = $(`#${div_id}`);\r\n\tvoid $notice.offsetWidth; // Trick browser layout engine. Necessary to make CSS transition work.\r\n\t$notice.style.opacity = 0;\r\n\t$notice.addEventListener('transitionend', () => $notice.remove());\r\n};\r\n\r\ntp.callbacks.save_changes = {};\r\n\r\n/**\r\n * Save Changes to the server.\r\n *\r\n * @param {Event} event [description]\r\n */\r\ntp.callbacks.save_changes.process = function (event) {\r\n\t// Validate input fields.\r\n\tif (!tp.helpers.options.validate_fields()) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Collect information about hidden rows and columns.\r\n\ttp.helpers.visibility.update();\r\n\r\n\t// Prepare the data for the AJAX request.\r\n\tconst request_data = {\r\n\t\taction: 'tablepress_save_table',\r\n\t\t_ajax_nonce: tp.nonces.edit_table,\r\n\t\ttablepress: {\r\n\t\t\tid: tp.table.id,\r\n\t\t\tnew_id: tp.table.new_id,\r\n\t\t\tname: $('#table-name').value,\r\n\t\t\tdescription: $('#table-description').value,\r\n\t\t\tdata: JSON.stringify(tp.editor.options.data),\r\n\t\t\toptions: JSON.stringify(tp.table.options),\r\n\t\t\tvisibility: JSON.stringify(tp.table.visibility),\r\n\t\t\tnumber: {\r\n\t\t\t\trows: tp.editor.options.data.length,\r\n\t\t\t\tcolumns: tp.editor.options.columns.length,\r\n\t\t\t},\r\n\t\t\tcss_styles: JSON.stringify(tp.editor.getStyle())\r\n\t\t},\r\n\t};\r\n\r\n\t// Add spinner, disable \"Save Changes\" buttons, and change cursor.\r\n\tevent.target.parentNode.insertAdjacentHTML('beforeend', `<span id=\"spinner-save-changes\" class=\"spinner-save-changes spinner is-active\" title=\"${__('Changes are being saved …', 'tablepress')}\"/>`);\r\n\t$('.button-save-changes').forEach((button) => (button.disabled = true));\r\n\tdocument.body.classList.add('wait');\r\n\r\n\t// Save the table data to the server via an AJAX request.\r\n\tfetch(ajaxurl, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t\tbody: buildQueryString(request_data),\r\n\t})\r\n\t\t// Check for HTTP connection problems.\r\n\t\t.then((response) => {\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthrow new Error(`There was a problem with the server, HTTP response code ${response.status} (${response.statusText}).`);\r\n\t\t\t}\r\n\t\t\treturn response.json();\r\n\t\t})\r\n\t\t// Check for problems with the transmitted data.\r\n\t\t.then((data) => {\r\n\t\t\tif ('undefined' === typeof data || null === data || '-1' === data || 'undefined' === typeof data.success) {\r\n\t\t\t\tthrow new Error('The JSON data returned from the server is unclear or incomplete.');\r\n\t\t\t}\r\n\r\n\t\t\tif (true !== data.success) {\r\n\t\t\t\tconst error_introduction = __('These errors were encountered:', 'tablepress');\r\n\t\t\t\tconst debug_html = data.error_details ? `</p><p>${error_introduction}</p><pre>${data.error_details}</pre><p>` : '';\r\n\t\t\t\tthrow new Error(`The table could not be saved to the database properly.${debug_html}`);\r\n\t\t\t}\r\n\r\n\t\t\ttp.callbacks.save_changes.success(data);\r\n\t\t})\r\n\t\t// Handle errors.\r\n\t\t.catch((error) => tp.callbacks.save_changes.error(error.message))\r\n\t\t.finally(() => {\r\n\t\t\t$('#spinner-save-changes').remove();\r\n\t\t\t$('.button-save-changes').forEach((button) => (button.disabled = false));\r\n\t\t\tdocument.body.classList.remove('wait');\r\n\t\t});\r\n};\r\n\r\n/**\r\n * [success description]\r\n *\r\n * @param {[type]} data [description]\r\n */\r\ntp.callbacks.save_changes.success = function (data) {\r\n\t// Saving was successful, so the original ID has changed to the (maybe) new ID -> we need to adjust all occurrences.\r\n\tif (tp.table.id !== data.table_id && window?.history?.pushState) {\r\n\t\t// Update URL, but only if the table ID changed, to not get dummy entries in the browser history.\r\n\t\twindow.history.pushState('', '', window.location.href.replace(/table_id=[0-9a-zA-Z-_]+/gi, `table_id=${data.table_id}`));\r\n\t}\r\n\r\n\t// Update table ID in input field.\r\n\ttp.table.id = data.table_id;\r\n\ttp.table.new_id = data.table_id;\r\n\t$('#table-id').value = data.table_id;\r\n\tconst $shortcode_field = $('#table-information-shortcode');\r\n\tif ($shortcode_field) {\r\n\t\t$shortcode_field.value = `[${tp.table.shortcode} id=${data.table_id} /]`;\r\n\t}\r\n\r\n\t// Update the nonces.\r\n\ttp.nonces.edit_table = data.new_edit_nonce;\r\n\ttp.nonces.preview_table = data.new_preview_nonce;\r\n\ttp.nonces.copy_table = data.new_copy_nonce;\r\n\ttp.nonces.delete_table = data.new_delete_nonce;\r\n\r\n\t// Update URLs in Preview, Copy, and Delete links/buttons.\r\n\t['preview', 'copy', 'delete'].forEach((action) => {\r\n\t\t$(`.button-${action}`).forEach((button) => {\r\n\t\t\tbutton.href = button.href\r\n\t\t\t\t.replace(/item=[a-zA-Z0-9_-]+/g, `item=${data.table_id}`) // Updates both the \"item\" and the \"return_item\" parameters.\r\n\t\t\t\t.replace(/&_wpnonce=[a-z0-9]+/ig, `&_wpnonce=${data[`new_${action}_nonce`]}`);\r\n\t\t});\r\n\t});\r\n\r\n\t// Update URL in Export links/buttons.\r\n\t$('.button-export').forEach((button) => {\r\n\t\tbutton.href = button.href\r\n\t\t\t.replace(/table_id=[a-zA-Z0-9_-]+/g, `table_id=${data.table_id}`);\r\n\t});\r\n\r\n\t// Update last-modified date and user nickname.\r\n\t$('#last-modified').textContent = data.last_modified;\r\n\t$('#last-editor').textContent = data.last_editor;\r\n\r\n\ttp.helpers.unsaved_changes.unset();\r\n\r\n\tconst action_messages = {};\r\n\taction_messages.success_save = __('The table was saved successfully.', 'tablepress');\r\n\taction_messages.success_save_success_id_change = action_messages.success_save + ' ' + __('The table ID was changed.', 'tablepress');\r\n\taction_messages.success_save_error_id_change = action_messages.success_save + ' ' + __('The table ID could not be changed, probably because the new ID is already in use!', 'tablepress');\r\n\r\n\tif ('success_save_error_id_change' === data.message && data.error_details) {\r\n\t\tconst error_introduction = __('These errors were encountered:', 'tablepress');\r\n\t\taction_messages.success_save_error_id_change += `</p><p>${error_introduction}</p><pre>${data.error_details}</pre><p>`;\r\n\t}\r\n\r\n\tconst type = (data.message.includes('error')) ? 'error' : 'success';\r\n\ttp.callbacks.save_changes.after_saving_notice(type, action_messages[data.message]);\r\n};\r\n\r\n/**\r\n * [error description]\r\n *\r\n * @param {[type]} message [description]\r\n */\r\ntp.callbacks.save_changes.error = function (message) {\r\n\tmessage = __('Attention: Unfortunately, an error occurred.', 'tablepress') + ' ' + message;\r\n\ttp.callbacks.save_changes.after_saving_notice('error', message);\r\n};\r\n\r\n/**\r\n * [after_saving_notice description]\r\n *\r\n * @param {[type]} type    [description]\r\n * @param {[type]} message [description]\r\n */\r\ntp.callbacks.save_changes.after_saving_notice = function (type, message) {\r\n\tconst div_id = `save-changes-${Date.now()}`;\r\n\r\n\t$('#spinner-save-changes').parentNode.insertAdjacentHTML('afterend', `<div id=\"${div_id}\" class=\"ajax-alert notice notice-${type}\"><p>${message}</p></div>`);\r\n\r\n\tconst $notice = $(`#${div_id}`);\r\n\tvoid $notice.offsetWidth; // Trick browser layout engine. Necessary to make CSS transition work.\r\n\t$notice.style.opacity = 0;\r\n\t$notice.addEventListener('transitionend', () => $notice.remove());\r\n};\r\n\r\ntp.callbacks.screen_options = {};\r\n\r\n/**\r\n * Updates table editor layout with new screen option values.\r\n *\r\n * @param {Event} event `input` event of the screen options fields.\r\n */\r\ntp.callbacks.screen_options.update = function (event) {\r\n\tif (!event.target) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ('table_editor_line_clamp' === event.target.id) {\r\n\t\ttp.editor.el.style.setProperty('--table-editor-line-clamp', parseInt(event.target.value, 10));\r\n\t\ttp.editor.updateCornerPosition();\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ('table_editor_column_width' === event.target.id) {\r\n\t\ttp.screen_options.table_editor_column_width = parseInt(event.target.value, 10);\r\n\t\ttp.screen_options.table_editor_column_width = Math.max(tp.screen_options.table_editor_column_width, 30); // Ensure a minimum column width of 30 pixesl.\r\n\t\ttp.screen_options.table_editor_column_width = Math.min(tp.screen_options.table_editor_column_width, 9999); // Ensure a maximum column width of 9999 pixesl.\r\n\t\ttp.editor.colgroup.forEach((col) => col.setAttribute('width', tp.screen_options.table_editor_column_width));\r\n\t\ttp.editor.updateCornerPosition();\r\n\t\treturn;\r\n\t}\r\n};\r\n\r\n/**\r\n * Designates a screen option field to have been changed, so that the value is sent to the server when it is blurred.\r\n *\r\n * @param {Event} event `change` event of the screen options fields.\r\n */\r\ntp.callbacks.screen_options.set_was_changed = function (event) {\r\n\tif (!event.target) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tevent.target.was_changed = true;\r\n};\r\n\r\n/**\r\n * Saves screen options to the server after they have been changed and the field is blurred.\r\n *\r\n * @param {Event} event `blur` event of the screen options fields.\r\n */\r\ntp.callbacks.screen_options.save = function (event) {\r\n\tif (!event.target) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (!event.target.was_changed) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tevent.target.was_changed = false;\r\n\r\n\t// Prepare the data for the AJAX request.\r\n\tconst request_data = {\r\n\t\taction: 'tablepress_save_screen_options',\r\n\t\t_ajax_nonce: tp.nonces.screen_options,\r\n\t\ttablepress: {\r\n\t\t\t[event.target.id]: parseInt(event.target.value, 10),\r\n\t\t},\r\n\t};\r\n\r\n\t// Add spinner and change cursor.\r\n\tevent.target.parentNode.insertAdjacentHTML('beforeend', `<span id=\"spinner-save-changes\" class=\"spinner-save-changes spinner is-active\" title=\"${__('Changes are being saved …', 'tablepress')}\"/>`);\r\n\tdocument.body.classList.add('wait');\r\n\r\n\t// Save the table data to the server via an AJAX request.\r\n\tfetch(ajaxurl, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t\tbody: buildQueryString(request_data),\r\n\t})\r\n\t\t.finally(() => {\r\n\t\t\t$('#spinner-save-changes').remove();\r\n\t\t\tdocument.body.classList.remove('wait');\r\n\t\t});\r\n};\r\n\r\ntp.callbacks.table_id = tp.callbacks.table_id || {};\r\n\r\n/**\r\n * [sanitize_table_id description]\r\n */\r\ntp.callbacks.table_id.sanitize = function () {\r\n\tthis.value = this.value.replace(/[^0-9a-zA-Z-_]/g, '');\r\n};\r\n\r\n/**\r\n * [change_table_id description]\r\n */\r\ntp.callbacks.table_id.change = function () {\r\n\t// The table IDs \"\" and \"0\" are not allowed, or in other words, the table ID has to fulfill /[A-Za-z1-9-_]|[A-Za-z0-9-_]{2,}/.\r\n\tif ('' === this.value || '0' === this.value) {\r\n\t\twindow.alert(__('This table ID is invalid. Please enter a different table ID.', 'tablepress'));\r\n\t\tthis.value = tp.table.new_id;\r\n\t\tthis.focus();\r\n\t\tthis.select();\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (!window.confirm(__('Do you really want to change the Table ID? All blocks and Shortcodes for this table in your posts and pages will have to be adjusted!', 'tablepress'))) {\r\n\t\tthis.value = tp.table.new_id;\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Set the new table ID.\r\n\ttp.table.new_id = this.value;\r\n\tconst $shortcode_field = $('#table-information-shortcode');\r\n\tif ($shortcode_field) {\r\n\t\t$shortcode_field.value = `[${tp.table.shortcode} id=${tp.table.new_id} /]`;\r\n\t\t$shortcode_field.focus();\r\n\t\t$shortcode_field.select();\r\n\t}\r\n\ttp.helpers.unsaved_changes.set();\r\n};\r\n\r\n/**\r\n * Inserts or duplicates rows or columns before each currently selected row/column.\r\n *\r\n * @param action\r\n * @param type\r\n * @param position\r\n */\r\ntp.callbacks.align = function (action, type, position = 'before') {\r\n\t// todo сейчас выраниватся весь столбец\r\n\t// даже если выделена одно ячейка\r\n\t// попробуй сделать через getSelectedColumns\r\n\r\n\tconst align_center = ('align_center' === action);\r\n\tconst handling_rows = ('rows' === type);\r\n\tconst num_cors = handling_rows ? tp.editor.options.columns.length : tp.editor.options.data.length;\r\n\tconst meta = {};\r\n\tlet align = 'left';\r\n\tif (align_center) {\r\n\t\talign = 'center';\r\n\t}\r\n\ttp.helpers.selection[type].forEach(function (roc_idx) {\r\n\t\tfor (let cor_idx = 0; cor_idx < num_cors; cor_idx++) {\r\n\t\t\tconst cellName = getCellName(roc_idx, cor_idx)\r\n\t\t\ttp.editor.setStyle(cellName, 'text-align', align, true, false)\r\n\t\t}\r\n\t});\r\n\ttp.helpers.unsaved_changes.set();\r\n\ttp.editor.updateTable(); // Redraw table.\r\n};\r\n\r\n/**\r\n * Inserts or duplicates rows or columns before each currently selected row/column.\r\n *\r\n * @param {string} action   The action to perform on the selected rows/columns (\"insert\" or \"duplicate\").\r\n * @param {string} type     What to insert or duplicate (\"rows\" or \"columns\").\r\n * @param {string} position Where to insert or duplicate (\"before\" or \"after\"). Default \"before\".\r\n */\r\ntp.callbacks.insert_duplicate = function (action, type, position = 'before') {\r\n\tconst handling_rows = ('rows' === type);\r\n\tconst insert_function = handling_rows ? tp.editor.insertRow : tp.editor.insertColumn;\r\n\tconst getData_function = handling_rows ? tp.editor.getRowData : tp.editor.getColumnData;\r\n\tconst duplicating = ('duplicate' === action);\r\n\t// Dynamically set the event handler, so that we have the action available in it.\r\n\ttp.editor.options[handling_rows ? 'oninsertrow' : 'oninsertcolumn'] = tp.callbacks.editor.oninsertroc.bind(null, type, action);\r\n\ttp.helpers.selection[type].forEach(function (roc_idx, array_idx) {\r\n\t\tconst shifted_roc_idx = roc_idx + array_idx; // Not having to deal with shifted indices is possible by looping through the reversed array, but that's likely slower.\r\n\t\tconst data = duplicating ? getData_function(shifted_roc_idx) : 1;\r\n\t\tconst position_bool = 'before' === position; // true means \"before\".\r\n\t\tinsert_function(data, shifted_roc_idx, position_bool);\r\n\t});\r\n\ttp.helpers.unsaved_changes.set();\r\n\r\n\t// Select both inserted/duplicated rows/columns if more than one were selected.\r\n\tconst num_selected_rocs = tp.helpers.selection[type].length;\r\n\tif (num_selected_rocs > 1) {\r\n\t\ttp.editor.updateSelectionFromCoords(\r\n\t\t\ttp.helpers.selection.columns[0],\r\n\t\t\ttp.helpers.selection.rows[0],\r\n\t\t\thandling_rows ? tp.helpers.selection.columns[tp.helpers.selection.columns.length - 1] : tp.helpers.selection.columns[tp.helpers.selection.columns.length - 1] + num_selected_rocs,\r\n\t\t\thandling_rows ? tp.helpers.selection.rows[tp.helpers.selection.rows.length - 1] + num_selected_rocs : tp.helpers.selection.rows[tp.helpers.selection.rows.length - 1]\r\n\t\t);\r\n\t}\r\n};\r\n\r\n/**\r\n * Removes currently selected rows or columns.\r\n *\r\n * @param {string} type What to remove (\"rows\" or \"columns\").\r\n */\r\ntp.callbacks.remove = function (type) {\r\n\tconst handling_rows = 'rows' === type;\r\n\tconst num_cors = handling_rows ? tp.editor.options.columns.length : tp.editor.options.data.length;\r\n\tconst last_roc_idx = handling_rows ? tp.editor.options.data.length - 1 : tp.editor.options.columns.length - 1;\r\n\r\n\t// Visibility meta information has to be deleted manually, as otherwise the Jspreadsheet meta information can get out of sync.\r\n\tif (tp.editor.options.meta) {\r\n\t\ttp.helpers.selection[type].forEach(function (roc_idx) {\r\n\t\t\tfor (let cor_idx = 0; cor_idx < num_cors; cor_idx++) {\r\n\t\t\t\tconst cell_idx = handling_rows ? [cor_idx, roc_idx] : [roc_idx, cor_idx];\r\n\t\t\t\tdelete tp.editor.options.meta[jspreadsheet.getColumnNameFromId(cell_idx)];\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tconst delete_function = handling_rows ? tp.editor.deleteRow : tp.editor.deleteColumn;\r\n\tdelete_function(tp.helpers.selection[type][0], tp.helpers.selection[type].length);\r\n\ttp.helpers.unsaved_changes.set();\r\n\r\n\t// Reselect last visible row/column, if last rows/columns were deleted.\r\n\tif (last_roc_idx === tp.helpers.selection[type][tp.helpers.selection[type].length - 1]) {\r\n\t\tconst col_idx = handling_rows ? tp.helpers.selection.columns[0] : tp.helpers.selection.columns[0] - 1;\r\n\t\tconst row_idx = handling_rows ? tp.helpers.selection.rows[0] - 1 : tp.helpers.selection.rows[0];\r\n\t\ttp.editor.updateSelectionFromCoords(col_idx, row_idx, col_idx, row_idx);\r\n\t}\r\n};\r\n\r\n/**\r\n * Appends rows or columns at the bottom or right end of the table.\r\n *\r\n * @param {string} type     What to append (\"rows\" or \"columns\").\r\n * @param {number} num_rocs Number of rows or columns to append.\r\n */\r\ntp.callbacks.append = function (type, num_rocs) {\r\n\tconst handling_rows = ('rows' === type);\r\n\tconst insert_function = handling_rows ? tp.editor.insertRow : tp.editor.insertColumn;\r\n\t// Dynamically set the event handler, so that we have the action available in it.\r\n\ttp.editor.options[handling_rows ? 'oninsertrow' : 'oninsertcolumn'] = tp.callbacks.editor.oninsertroc.bind(null, type, 'append');\r\n\tinsert_function(num_rocs);\r\n\ttp.helpers.unsaved_changes.set();\r\n};\r\n\r\n/**\r\n * Moves currently selected rows or columns.\r\n *\r\n * @param {string} direction Where to move the selected rows or columns (for rows: \"up\"/\"down\"/\"top\"/\"bottom\", for columns: \"left\"/right\"/\"first\"/\"last\").\r\n * @param {string} type      What to move (\"rows\" or \"columns\").\r\n */\r\ntp.callbacks.move = function (direction, type) {\r\n\tconst handling_rows = ('rows' === type);\r\n\r\n\t// Default case: up/left\r\n\tlet rocs = tp.helpers.selection[type]; // When moving up or left, start with the first row/column of the selected range.\r\n\tlet position_difference = -1; // New row/column number is one smaller than current row/column number.\r\n\t// Alternate case: down/right\r\n\tif ('down' === direction || 'right' === direction) {\r\n\t\trocs = rocs.slice().reverse(); // When moving down or right, reverse the order, to start with the last row/column of the selected range. slice() is needed here to create an array copy.\r\n\t\tposition_difference = 1; // New row/column number is one higher than current row/column number.\r\n\t} else if ('top' === direction || 'first' === direction) {\r\n\t\tposition_difference = -rocs[0];\r\n\t} else if ('bottom' === direction || 'last' === direction) {\r\n\t\trocs = rocs.slice().reverse(); // When moving down or right, reverse the order, to start with the last row/column of the selected range. slice() is needed here to create an array copy.\r\n\t\tconst min_max_roc = ('rows' === type) ? tp.editor.options.data.length - 1 : tp.editor.options.columns.length - 1;\r\n\t\tposition_difference = min_max_roc - rocs[0];\r\n\t}\r\n\r\n\t// Bail early if there is nothing to do (e.g. when the selected range is already at the target edge).\r\n\tif (0 === position_difference) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Move the selected rows/columns individually.\r\n\tconst move_function = handling_rows ? tp.editor.moveRow : tp.editor.moveColumn;\r\n\trocs.forEach((roc_idx) => move_function(roc_idx, roc_idx + position_difference));\r\n\ttp.helpers.unsaved_changes.set();\r\n\r\n\t// Reselect moved selection.\r\n\ttp.editor.updateSelectionFromCoords(\r\n\t\thandling_rows ? tp.helpers.selection.columns[0] : tp.helpers.selection.columns[0] + position_difference,\r\n\t\thandling_rows ? tp.helpers.selection.rows[0] + position_difference : tp.helpers.selection.rows[0],\r\n\t\thandling_rows ? tp.helpers.selection.columns[tp.helpers.selection.columns.length - 1] : tp.helpers.selection.columns[tp.helpers.selection.columns.length - 1] + position_difference,\r\n\t\thandling_rows ? tp.helpers.selection.rows[tp.helpers.selection.rows.length - 1] + position_difference : tp.helpers.selection.rows[tp.helpers.selection.rows.length - 1]\r\n\t);\r\n};\r\n\r\n/**\r\n * Sorts the table data by the first currently selected column.\r\n *\r\n * @param {string} direction Sort order/direction (\"asc\" for ascending, \"desc\" for descending).\r\n */\r\ntp.callbacks.sort = function (direction) {\r\n\ttp.editor.orderBy(tp.helpers.selection.columns[0], ('desc' === direction));\r\n};\r\n\r\n/**\r\n * Hides or unhides selected rows or columns.\r\n *\r\n * @param {string} action The action to perform on the rows/columns (\"hide\" or \"unhide\").\r\n * @param {string} type   What to hide or unhide (\"rows\" or \"columns\").\r\n */\r\ntp.callbacks.hide_unhide = function (action, type) {\r\n\tconst handling_rows = ('rows' === type);\r\n\tconst property = handling_rows ? 'row_hidden' : 'column_hidden';\r\n\tconst num_cors = handling_rows ? tp.editor.options.columns.length : tp.editor.options.data.length;\r\n\tconst cell_hidden = ('hide' === action);\r\n\tconst meta = {};\r\n\ttp.helpers.selection[type].forEach(function (roc_idx) {\r\n\t\tfor (let cor_idx = 0; cor_idx < num_cors; cor_idx++) {\r\n\t\t\tconst cell_idx = handling_rows ? [cor_idx, roc_idx] : [roc_idx, cor_idx];\r\n\t\t\tconst cell_name = jspreadsheet.getColumnNameFromId(cell_idx);\r\n\t\t\tmeta[cell_name] = {};\r\n\t\t\tmeta[cell_name][property] = cell_hidden;\r\n\t\t}\r\n\t});\r\n\ttp.editor.setMeta(meta);\r\n\ttp.helpers.unsaved_changes.set();\r\n\ttp.editor.updateTable(); // Redraw table.\r\n};\r\n\r\n/**\r\n * Combines/merges the currently selected cells.\r\n */\r\ntp.callbacks.merge_cells = function () {\r\n\tconst current_col_idx = tp.helpers.selection.columns[0];\r\n\tconst current_row_idx = tp.helpers.selection.rows[0];\r\n\tconst colspan = tp.helpers.selection.columns.length;\r\n\tconst rowspan = tp.helpers.selection.rows.length;\r\n\tfor (let row_idx = 1; row_idx < rowspan; row_idx++) {\r\n\t\ttp.editor.setValueFromCoords(current_col_idx, current_row_idx + row_idx, '#rowspan#');\r\n\t}\r\n\tfor (let col_idx = 1; col_idx < colspan; col_idx++) {\r\n\t\ttp.editor.setValueFromCoords(current_col_idx + col_idx, current_row_idx, '#colspan#');\r\n\t}\r\n\tfor (let row_idx = 1; row_idx < rowspan; row_idx++) {\r\n\t\tfor (let col_idx = 1; col_idx < colspan; col_idx++) {\r\n\t\t\ttp.editor.setValueFromCoords(current_col_idx + col_idx, current_row_idx + row_idx, '#span#');\r\n\t\t}\r\n\t}\r\n\ttp.helpers.unsaved_changes.set();\r\n};\r\n\r\n/**\r\n * Registers keyboard events and triggers corresponding actions by emulating button clicks.\r\n *\r\n * @param {Event} event Keyboard event.\r\n */\r\ntp.callbacks.keyboard_shortcuts = function (event) {\r\n\tlet action = '';\r\n\tlet move_direction = '';\r\n\tlet move_type = '';\r\n\r\n\tif (event.ctrlKey || event.metaKey) {\r\n\t\tif (80 === event.keyCode) {\r\n\t\t\t// Preview: Ctrl/Cmd + P.\r\n\t\t\taction = 'preview';\r\n\t\t} else if (83 === event.keyCode) {\r\n\t\t\t// Save Changes: Ctrl/Cmd + S.\r\n\t\t\taction = 'save-changes';\r\n\t\t} else if (76 === event.keyCode) {\r\n\t\t\t// Insert Link: Ctrl/Cmd + L.\r\n\t\t\taction = 'insert_link';\r\n\t\t} else if (73 === event.keyCode) {\r\n\t\t\t// Insert Image: Ctrl/Cmd + I.\r\n\t\t\taction = 'insert_image';\r\n\t\t} else if (69 === event.keyCode) {\r\n\t\t\t// Advanced Editor: Ctrl/Cmd + E.\r\n\t\t\taction = 'advanced_editor';\r\n\t\t} else if (event.shiftKey && event.altKey && 38 === event.keyCode) {\r\n\t\t\t// Move up: Ctrl/Cmd + Alt/Option + Shift + ↑.\r\n\t\t\taction = 'move';\r\n\t\t\tmove_direction = 'top';\r\n\t\t\tmove_type = 'rows';\r\n\t\t} else if (event.shiftKey && event.altKey && 40 === event.keyCode) {\r\n\t\t\t// Move down: Ctrl/Cmd + Alt/Option + Shift + ↓.\r\n\t\t\taction = 'move';\r\n\t\t\tmove_direction = 'bottom';\r\n\t\t\tmove_type = 'rows';\r\n\t\t} else if (event.shiftKey && event.altKey && 37 === event.keyCode) {\r\n\t\t\t// Move left: Ctrl/Cmd + Alt/Option + Shift + ←.\r\n\t\t\taction = 'move';\r\n\t\t\tmove_direction = 'first';\r\n\t\t\tmove_type = 'columns';\r\n\t\t} else if (event.shiftKey && event.altKey && 39 === event.keyCode) {\r\n\t\t\t// Move r: Ctrl/Cmd + Alt/Option + Shift + →.\r\n\t\t\taction = 'move';\r\n\t\t\tmove_direction = 'last';\r\n\t\t\tmove_type = 'columns';\r\n\t\t} else if (event.shiftKey && 38 === event.keyCode) {\r\n\t\t\t// Move up: Ctrl/Cmd + Shift + ↑.\r\n\t\t\taction = 'move';\r\n\t\t\tmove_direction = 'up';\r\n\t\t\tmove_type = 'rows';\r\n\t\t} else if (event.shiftKey && 40 === event.keyCode) {\r\n\t\t\t// Move down: Ctrl/Cmd + Shift + ↓.\r\n\t\t\taction = 'move';\r\n\t\t\tmove_direction = 'down';\r\n\t\t\tmove_type = 'rows';\r\n\t\t} else if (event.shiftKey && 37 === event.keyCode) {\r\n\t\t\t// Move left: Ctrl/Cmd + Shift + ←.\r\n\t\t\taction = 'move';\r\n\t\t\tmove_direction = 'left';\r\n\t\t\tmove_type = 'columns';\r\n\t\t} else if (event.shiftKey && 39 === event.keyCode) {\r\n\t\t\t// Move r: Ctrl/Cmd + Shift + →.\r\n\t\t\taction = 'move';\r\n\t\t\tmove_direction = 'right';\r\n\t\t\tmove_type = 'columns';\r\n\t\t}\r\n\t}\r\n\r\n\tif ('save-changes' === action || 'preview' === action) {\r\n\t\t// Blur the focussed element to make sure that all change events were triggered.\r\n\t\tdocument.activeElement.blur(); // eslint-disable-line @wordpress/no-global-active-element\r\n\r\n\t\t/*\r\n\t\t * Emulate a click on the button corresponding to the action.\r\n\t\t * This way, things like notices will be shown, compared to directly calling the buttons' callbacks.\r\n\t\t */\r\n\t\tdocument.querySelector(`#tablepress_edit-buttons-2-submit .button-${action}`).click();\r\n\r\n\t\t// Prevent the browser's native handling of the shortcut, i.e. showing the Save or Print dialogs.\r\n\t\tevent.preventDefault();\r\n\t} else if ('insert_link' === action || 'insert_image' === action || 'advanced_editor' === action) {\r\n\t\t// Only open the dialogs if an element in the table editor is focussed, to e.g. prevent multiple dialogs to be opened.\r\n\t\tif ($('#table-editor').contains(document.activeElement)) { // eslint-disable-line @wordpress/no-global-active-element\r\n\t\t\tconst $active_textarea = ('TEXTAREA' === document.activeElement.tagName) ? document.activeElement : null; // eslint-disable-line @wordpress/no-global-active-element\r\n\t\t\t// Open the \"Insert Link\", \"Insert Image\", or Advanced Editor\" dialog.\r\n\t\t\ttp.callbacks[action].open_dialog($active_textarea);\r\n\t\t}\r\n\r\n\t\t// Prevent the browser's native handling of the shortcut.\r\n\t\tevent.preventDefault();\r\n\t} else if ('move' === action) {\r\n\t\t// Only move rows or columns if an element in the table editor is focussed, but not if the cell is being edited (to not prevent the browser's original shortcuts).\r\n\t\tif ($('#table-editor').contains(document.activeElement) && 'TEXTAREA' !== document.activeElement.tagName) { // eslint-disable-line @wordpress/no-global-active-element\r\n\t\t\t// Move the selected rows or columns.\r\n\t\t\tif (tp.helpers.move_allowed(move_type, move_direction)) {\r\n\t\t\t\ttp.callbacks.move(move_direction, move_type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Stop the event propagation so that Jspreadsheet doesn't understand the arrow key as movement of the cursor, and prevent the browser's native handling of the shortcut.\r\n\t\tevent.stopImmediatePropagation();\r\n\t}\r\n};\r\n\r\n/*\r\n * Initialize Jspreadsheet.\r\n */\r\ntp.editor = jspreadsheet($('#table-editor'), {\r\n\tdata: tp.table.data,\r\n\tmeta: tp.helpers.visibility.load(),\r\n\twordWrap: true,\r\n\trowDrag: true,\r\n\trowResize: true,\r\n\tcolumnSorting: true,\r\n\tcolumnDrag: true,\r\n\tcolumnResize: true,\r\n\tdefaultColWidth: tp.screen_options.table_editor_column_width,\r\n\tdefaultColAlign: 'left',\r\n\tdefaultColT: 'left',\r\n\tparseFormulas: false,\r\n\tallowExport: false,\r\n\tallowComments: false,\r\n\tallowManualInsertRow: false, // To prevent addition of new row when Enter is pressed in last row.\r\n\tallowManualInsertColumn: false, // To prevent addition of new column when Tab is pressed in last column.\r\n\tabout: false,\r\n\tsecureFormulas: false,\r\n\tdetachForUpdates: true,\r\n\tonselection: tp.callbacks.editor.onselection,\r\n\tupdateTable: tp.callbacks.editor.onupdatetable,\r\n\tcontextMenu,\r\n\tsorting: tp.helpers.editor.sorting,\r\n\t// Keep the selection when certain events occur and the table loses focus.\r\n\tonmoverow: tp.callbacks.editor.onmove,\r\n\tonmovecolumn: tp.callbacks.editor.onmove,\r\n\tonblur: tp.helpers.editor.reselect,\r\n\tonload: tp.helpers.editor.reselect, // When the table is loaded, select the top-left cell A1.\r\n\tonchange: tp.helpers.unsaved_changes.set,\r\n\tonsort: tp.callbacks.editor.onsort,\r\n\tstripHTML: false,\r\n});\r\n\r\ntp.helpers.options.load();\r\n\r\n/*\r\n * Register click callback for the \"Preview\" and \"Save Changes\" buttons.\r\n */\r\n$('#tablepress-page').addEventListener('click', (event) => {\r\n\tif (!event.target) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (event.target.matches('.button-preview')) {\r\n\t\ttp.callbacks.table_preview.process(event);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (event.target.matches('.button-save-changes')) {\r\n\t\ttp.callbacks.save_changes.process(event);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (event.target.matches('.button-show-help-box')) {\r\n\t\ttp.callbacks.help_box.open_dialog(event);\r\n\t\treturn;\r\n\t}\r\n});\r\n\r\n/*\r\n * Register click callbacks for the table manipulation buttons.\r\n */\r\n$('#tablepress-manipulation-controls').addEventListener('click', (event) => {\r\n\tif (!event.target) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t/*\r\n\t * Events that don't require a selection.\r\n\t */\r\n\r\n\tif (event.target.matches('.button-append')) {\r\n\t\tconst type = event.target.dataset.type;\r\n\t\tconst $input_field = $(`#${type}-append-number`);\r\n\t\tconst num_rocs = parseInt($input_field.value, 10);\r\n\t\tif (isNaN(num_rocs) || num_rocs < 1 || num_rocs > 99999) {\r\n\t\t\tconst message = ('rows' === event.target.dataset.type) ? __('The value for the number of rows is invalid!', 'tablepress') : __('The value for the number of columns is invalid!', 'tablepress');\r\n\t\t\twindow.alert(message);\r\n\t\t\t$input_field.focus();\r\n\t\t\t$input_field.select();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttp.callbacks.append(type, num_rocs);\r\n\t\treturn;\r\n\t}\r\n\r\n\t/*\r\n\t * Events that do require a selection.\r\n\t */\r\n\r\n\tif ('button-insert-link' === event.target.id) {\r\n\t\ttp.callbacks.insert_link.open_dialog();\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ('button-insert-image' === event.target.id) {\r\n\t\ttp.callbacks.insert_image.open_dialog();\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ('button-advanced-editor' === event.target.id) {\r\n\t\ttp.callbacks.advanced_editor.open_dialog();\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (event.target.matches('.button-insert-duplicate')) {\r\n\t\ttp.callbacks.insert_duplicate(event.target.dataset.action, event.target.dataset.type);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (event.target.matches('.button-align-center')) {\r\n\t\ttp.callbacks.align(event.target.dataset.action, event.target.dataset.type);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (event.target.matches('.button-align-left')) {\r\n\t\ttp.callbacks.align(event.target.dataset.action, event.target.dataset.type);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (event.target.matches('.button-move')) {\r\n\t\tif (!tp.helpers.move_allowed(event.target.dataset.type, event.target.dataset.direction)) {\r\n\t\t\twindow.alert(__('You can not do this move, because you reached the border of the table.', 'tablepress'));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttp.callbacks.move(event.target.dataset.direction, event.target.dataset.type);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (event.target.matches('.button-remove')) {\r\n\t\tconst handling_rows = ('rows' === event.target.dataset.type);\r\n\t\tconst num_rocs = handling_rows ? tp.editor.options.data.length : tp.editor.options.columns.length;\r\n\r\n\t\tif (num_rocs === tp.helpers.selection[event.target.dataset.type].length) {\r\n\t\t\tconst message = handling_rows ? __('You can not delete all table rows!', 'tablepress') : __('You can not delete all table columns!', 'tablepress');\r\n\t\t\twindow.alert(message);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttp.callbacks.remove(event.target.dataset.type);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (event.target.matches('.button-merge-unmerge')) {\r\n\t\tif (tp.helpers.cell_merge_allowed('alert')) {\r\n\t\t\ttp.callbacks.merge_cells();\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (event.target.matches('.button-hide-unhide')) {\r\n\t\ttp.callbacks.hide_unhide(event.target.dataset.action, event.target.dataset.type);\r\n\t\treturn;\r\n\t}\r\n});\r\n\r\n// Register callbacks for the table ID text field.\r\nconst $table_id_field = $('#table-id');\r\n$table_id_field.addEventListener('input', tp.callbacks.table_id.sanitize);\r\n$table_id_field.addEventListener('change', tp.callbacks.table_id.change);\r\n\r\n// Select Shortcode input field content when it's focussed.\r\nconst $table_information_shortcode = $('#table-information-shortcode');\r\nif ($table_information_shortcode) {\r\n\t$table_information_shortcode.addEventListener('focus', function () {\r\n\t\tthis.select();\r\n\t});\r\n}\r\n\r\n// Register callback for inserting a link into a cell after it has been constructed in the wpLink dialog.\r\njQuery('#textarea-insert-helper').on('change', tp.helpers.editor.insert_from_helper_textarea); // This must use jQuery, as wpLink triggers jQuery events, which can not be observed by native JS listeners.\r\n\r\n// Register change callbacks for the table name, description, and options.\r\n['#table-name', '#table-description'].forEach((field_id) => $(field_id).addEventListener('change', tp.helpers.unsaved_changes.set));\r\nconst options_meta_boxes = apply_filters('tablepress.optionsMetaBoxes', ['#tablepress_edit-table-options', '#tablepress_edit-datatables-features']);\r\noptions_meta_boxes.forEach((meta_box_id) => $(meta_box_id).addEventListener('change', tp.helpers.options.change));\r\n\r\n// Move all \"Help\" buttons inside the postbox header.\r\ndocument.querySelectorAll('#tablepress-body .button-module-help').forEach(($button) => ($button.closest('.postbox').querySelector('.handle-actions').prepend($button)));\r\n\r\n// Register callbacks for the screen options.\r\nconst $tablepress_screen_options = $('#tablepress-screen-options');\r\n$tablepress_screen_options.addEventListener('input', tp.callbacks.screen_options.update);\r\n$tablepress_screen_options.addEventListener('change', tp.callbacks.screen_options.set_was_changed);\r\n$tablepress_screen_options.addEventListener('focusout', tp.callbacks.screen_options.save); // Use the `focusout` event instead of `blur` as that does not bubble.\r\n\r\n// Register keyboard shortcut handler.\r\nwindow.addEventListener('keydown', tp.callbacks.keyboard_shortcuts, true);\r\n\r\n// Add keyboard shortcuts as title attributes to \"Preview\" and \"Save Changes\" buttons, with correct modifier key for Mac/non-Mac.\r\nconst modifier_key = (window?.navigator?.platform?.includes('Mac')) ?\r\n\t_x('⌘', 'keyboard shortcut modifier key on a Mac keyboard', 'tablepress') :\r\n\t_x('Ctrl+', 'keyboard shortcut modifier key on a non-Mac keyboard', 'tablepress');\r\ndocument.querySelectorAll('.button[data-shortcut]').forEach(($button) => {\r\n\tconst shortcut = sprintf($button.dataset.shortcut, modifier_key); // eslint-disable-line @wordpress/valid-sprintf\r\n\t$button.title = sprintf(__('Keyboard Shortcut: %s', 'tablepress'), shortcut);\r\n});\r\n\r\n// This code requires jQuery, and it must run when the DOM is ready. Therefore, move it outside of the main function.\r\njQuery(function () {\r\n\t// Fix issue with wpLink input fields not being usable, when called through the \"Advanced Editor\". They are immediately losing focus without this.\r\n\tjQuery('#wp-link').on('focus', 'input', function (event) {\r\n\t\tevent.stopPropagation();\r\n\t});\r\n\r\n\t// Fix issue with Media Library input fields in the sidebar not being usable, when called through the \"Advanced Editor\". They are immediately losing focus without this.\r\n\tjQuery('body').on('focus', '.media-modal .media-frame-content input, .media-modal .media-frame-content textarea', function (event) {\r\n\t\tevent.stopPropagation();\r\n\t});\r\n});\r\n\r\nfunction getCellName(x, y) {\r\n\tlet columnName = '';\r\n\twhile (x >= 0) {\r\n\t\tcolumnName = String.fromCharCode(x % 26 + 65) + columnName;\r\n\t\tx = Math.floor(x / 26) - 1;\r\n\t}\r\n\treturn columnName + (y + 1);\r\n}\r\n"],"names":["$","selector","document","getElementById","slice","querySelectorAll","__","_x","_n","sprintf","contextMenu","obj","num_rows","tp","editor","options","data","length","num_columns","columns","num_selected_rows","helpers","selection","rows","num_selected_columns","is_mac","window","navigator","platform","includes","meta_key","option_key","error_message","text","visibility","update","items","title","shortcut","onclick","undo","disabled","historyIndex","redo","history","type","activeElement","tagName","selectionStart","selectionEnd","execCommand","cursorPosition","value","copy","setValue","highlighted","clipboard","readText","then","selectedCell","paste","tooltip","callbacks","insert_link","open_dialog","bind","insert_image","advanced_editor","submenu","insert_duplicate","append","remove","move","move_allowed","sort","hide_unhide","selection_contains","merge_cells","cell_merge_allowed","doAction","do_action","applyFilters","apply_filters","buildQueryString","made_changes","unsaved_changes","unload_dialog","event","preventDefault","returnValue","set","addEventListener","unset","removeEventListener","load","Object","keys","table","forEach","option_name","$field","HTMLInputElement","checked","use_datatables","has_merged_cells","check_dependencies","change","target","name","property","parseInt","alert","updateTable","table_head","style","display","print_name","print_description","js_features_enabled","pagination_enabled","datatables_paginate","validate_fields","isNaN","datatables_paginate_entries","focus","select","test","extra_css_classes","meta","row_idx","col_idx","cell_name","jspreadsheet","getColumnNameFromId","row_hidden","column_hidden","cell","getIdFromColumnName","some","roc_idx","direction","roc_to_test","min_max_roc","errors","alert_on_error","first_selected_row","last_selected_row","last_row_idx","table_foot","reselect","el","updateSelectionFromCoords","sorting","a","b","sortResult","localeCompare","undefined","numeric","sensitivity","onselection","instance","x1","y1","x2","y2","push","onupdatetable","label","classList","toggle","Boolean","parentNode","visible_rows","content","add","oninsertroc","action","num_rocs","roc_records","insertBefore","handling_rows","duplicating","from_roc_idx","num_cors","from_meta","cor_idx","cell_idx","from_meta_keys","to_meta","new_roc","to_roc_idx","setMeta","onmove","onsort","insert_from_helper_textarea","setValueFromCoords","$active_textarea","$helper_textarea","jexcel","textContent","wpLink","open","current","wp","media","frame","state","view","l10n","addMedia","multiple","querySelector","$textarea","console","log","jQuery","wpdialog","width","modal","resizable","closeOnEscape","buttons","class","click","confirm_save","current_value","tinyMCE","get","getContent","help_box","$helpbox","dataset","helpBox","height","minWidth","next","find","trigger","table_preview","process","table_name","trim","$dialog","autoOpen","innerWidth","innerHeight","id","$iframe","src","href","removeAttribute","request_data","_ajax_nonce","nonces","preview_table","tablepress","new_id","description","JSON","stringify","number","cssStyles","getStyle","insertAdjacentHTML","button","body","fetch","ajaxurl","method","headers","Accept","response","ok","Error","status","statusText","json","success","catch","error","message","finally","srcdoc","head_html","body_html","div_id","Date","now","$notice","offsetWidth","opacity","save_changes","edit_table","css_styles","error_introduction","debug_html","error_details","table_id","pushState","location","replace","$shortcode_field","shortcode","new_edit_nonce","new_preview_nonce","copy_table","new_copy_nonce","delete_table","new_delete_nonce","last_modified","last_editor","action_messages","success_save","success_save_success_id_change","success_save_error_id_change","after_saving_notice","screen_options","setProperty","updateCornerPosition","table_editor_column_width","Math","max","min","colgroup","col","setAttribute","set_was_changed","was_changed","save","sanitize","confirm","align","position","align_center","cellName","getCellName","setStyle","insert_function","insertRow","insertColumn","getData_function","getRowData","getColumnData","array_idx","shifted_roc_idx","position_bool","num_selected_rocs","last_roc_idx","delete_function","deleteRow","deleteColumn","rocs","position_difference","reverse","move_function","moveRow","moveColumn","orderBy","cell_hidden","current_col_idx","current_row_idx","colspan","rowspan","keyboard_shortcuts","move_direction","move_type","ctrlKey","metaKey","keyCode","shiftKey","altKey","blur","contains","stopImmediatePropagation","wordWrap","rowDrag","rowResize","columnSorting","columnDrag","columnResize","defaultColWidth","defaultColAlign","defaultColT","parseFormulas","allowExport","allowComments","allowManualInsertRow","allowManualInsertColumn","about","secureFormulas","detachForUpdates","onmoverow","onmovecolumn","onblur","onload","onchange","stripHTML","matches","$input_field","$table_id_field","$table_information_shortcode","on","field_id","options_meta_boxes","meta_box_id","$button","closest","prepend","$tablepress_screen_options","modifier_key","stopPropagation","x","y","columnName","String","fromCharCode","floor"],"sourceRoot":""}